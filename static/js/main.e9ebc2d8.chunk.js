(this["webpackJsonpwealthica-portfolio-addon"]=this["webpackJsonpwealthica-portfolio-addon"]||[]).push([[0],{298:function(e,t,n){},302:function(e,t,n){},580:function(e,t,n){"use strict";n.r(t);var l=n(0),a=n.n(l),i=n(32),o=n.n(i),r=(n(298),n(124)),s=n.n(r),u=n(28),c=n(204),d=n(144),p=n(145),h=n(169),f=n(167),b=n(275),m=n(586),y=n(24),g=n(151),v=n(66),j=n.n(v),x=n(57),O=n.n(x),A=n(68),k=n.n(A),w=n(51),C=n.n(w),P=n(13),D=n.n(P),M=n(15),_=!1;function S(e){window.analytics&&((_=!0)&&window.analytics.page(),E("init"),window.analytics.identify(e))}function E(e,t){_?window.analytics.track(e,t||{}):console.debug("[analytics] track event",{action:e,data:t})}var T=n(25),F="YYYY-MM-DD",Y="2010-01-01",L={buy:"#9948d1",sell:"#FF897C",income:"green",dividend:"green",distribution:"green",tax:"brown",fee:"brown"},z="__pnl_change_log_date__",I=function(e){return D()(e.slice(0,10),F)},Q=function(e,t,n){var l=n["string"===typeof e?e:e.format(F)];if(l)return t/l;var a=Object.keys(n).sort((function(e,t){return t.localeCompare(e)}))[0];return a?t/n[a]:t},R=function(e,t){return t=void 0===t||null===t?2:t,void 0===e||null===e?"-":e.toLocaleString("en-US",{minimumFractionDigits:t,maximumFractionDigits:t})};var B=function(e){return"".concat(e.symbol||e.name).concat("usd"===e.currency||"crypto"===e.type?"":".TO")},N=function(e){return"cad"===e.currency?"TSE:".concat(e.symbol):e.symbol},q=function(e){return e.startsWith("TSE:")?"".concat(e.replace("TSE:",""),".TO"):e},U=function(e,t){return e.reduce((function(e,n){return n[t]<e[t]?n:e}),e[0])},H=function(e,t){return e.reduce((function(e,n){return n[t]>e[t]?n:e}),e[0])},V=function(e,t){var n,l=[{value:1,symbol:""},{value:1e3,symbol:"K"},{value:1e6,symbol:"M"},{value:1e9,symbol:"G"},{value:1e12,symbol:"T"},{value:1e15,symbol:"P"},{value:1e18,symbol:"E"}];for(n=l.length-1;n>0&&!(Math.abs(e)>=l[n].value);n--);var a=(Math.abs(e)/l[n].value).toFixed(t).replace(/\.0+$|(\.[0-9]*[1-9])0+$/,"$1")+l[n].symbol;return e<0?"-".concat(a):a};function G(e){return"https://cors.bridged.cc/".concat(e)}function J(e){var t=D()(e),n=t.day(),l=1;return 0!==n&&1!==n||(l=n+2),t.subtract(l,"days")}var W=function(e){var t=I(e.from);return e.data.reduce((function(e,n){return n&&(e[t.format(F)]=Number(n)),t.add(1,"days"),e}),{})},K=function(e,t,n){return e.filter((function(e){return!n||!n.length||n.includes(e.id)})).reduce((function(e,n){return e.concat(n.investments.filter((function(e){return(!t||!t.length||t.includes(e.group))&&!e.ignored})).map((function(e){return{id:e._id,institution:n.id,instutitionName:n.name,name:"".concat(n.name," ").concat(e.name),created_at:I(n.creation_date),type:(t=e.type?e.type:e.name&&e.name.includes("-")?e.name.split("-")[1].trim():e.name,(t=t?t.toUpperCase():"").includes("SRRSP")?"SRRSP":t.includes("RRSP")||t.includes("REGISTERED RETIREMENT SAVINGS PLAN")?"RRSP":t.includes("TFSA")||t.includes("TAX FREE SAVINGS PLAN")?"TFSA":"CASH"===t.toLocaleUpperCase()||"MARGIN"===t.toLocaleUpperCase()?"Margin":t),group:e.group,cash:e.cash,value:e.value,currency_value:e.currency_value,currency:e.currency,positions:(e.positions||[]).map((function(e){return Object(T.a)(Object(T.a)({},e),{},{symbol:B(e.security)})}))};var t})))}),[])},Z=function(e){var t=e.history.total,n=I(t.from);return t.data.reduce((function(e,t){return t&&(e[n.format(F)]=Number(t)),n.add(1,"days"),e}),{})},X=function(e,t){return e.filter((function(e){return!e.deleted&&e.type})).filter((function(e){return["interest","deposit","withdrawal","transfer","fee"].includes(e.type.toLowerCase())})).map((function(e){var n=I(e.date),l=Number(e.currency_amount);return l=e.investment&&e.investment.includes(":usd")?Q(n,l,t):l,{date:n,account:e.investment,amount:Math.abs(l),type:e.type,description:e.description}}))},$=function(e){return e.map((function(e){return e}))},ee=(n(302),n(280)),te=n.n(ee),ne=n(205),le=n.n(ne),ae=n(141),ie=n.n(ae),oe=n(106),re=n.n(oe),se=n(279),ue=n.n(se),ce=n(168),de=n(36),pe=n(1);function he(e){var t=e.children,n=Object(l.useState)({width:window.innerWidth,height:window.innerHeight}),a=Object(u.a)(n,2),i=a[0],o=a[1];return Object(pe.jsx)(de.default,{onResize:function(e){var t=e.width,n=e.height;return o({width:t,height:n})},children:t(i)})}var fe=[{date:"2021-05-18",tab:"Realized P&L",title:"Plot Income, Interest Along With Realized P&L",description:"We have made few changes to the Realized P&L chart to visualize the income, interest along with the Realized P&L.",images:["https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/Realized_PnL_Total_SkXH_ENpd.png","https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/Realized_PnL_ISmwPJbTB.png","https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/Realized_PnL_Income_-DAQM_F0GI.png","https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/Realized_PnL_History_9IKwqx0dG.png"]},{date:"2021-04-20",tab:"Realized P&L",title:"Interest transactions aggregated by day/week/month/year and complete history",description:'Ever wondered how much interest you are paying on your borrowed margin money. This chart is available under "Realized P&L" tab where you can toggle the checkbox and play with interests and aggregate the interest by day/week/month/year. We also show the interest transactions in a table to have a quick view. Please note the new tab will show up only if you have any interest type transactions.',images:["https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/Realized_PnL_Interest_hWDAZtWWUc.png","https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/Realized_PnL_History_9IKwqx0dG.png"]},{date:"2021-04-19",tab:"Events",title:"Table view for the Earnings Calendar",description:"The table view will be give a quick view of the upcoming earnings for your holdings in addition to the calendar view.",images:["https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/earnings-table__eCvysZ8d.png"]},{date:"2021-04-12",tab:"Gainers/Losers",title:"Stock Level P/L Ratio (%) & P/L Value ($) Timeline",description:"These new charts show the P/L timeline at a stock level based on your cost basis. You can access these charts in the Gainers/Losers tab by clicking on the stock.",images:["https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/stock-pnl-ratio-timeline_Rsh-BbaNk.png","https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/stock-pnl-value-timeline_d8yk4s7Zb.png","https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/stock-pnl-timeline-chart_xAEevDsMn.png"]},{date:"2021-04-11",tab:"Events",title:"Upcoming Earnings & Dividends dates for your holdings",description:"A new tab called Events has been added. This tab will show the upcoming earnings & dividend dates in a calendar.",images:["https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/events_CT25iZoKb.png"]},{date:"2021-04-10",tab:"News",title:"News articles related to your holdings from multiple sources",description:"A new tab called News has been added. This tab will list some of the recent news corresponding to your holdings. It also has a sentiment toggle.",images:["https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/news-all_-ezDjr1C1.png","https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/news-sentiment_WokC226oS.png"]},{date:"2021-04-05",tab:"Holdings Analyzer",title:"Holdings Composition Visualizer",description:'You can now visualize your holdings composition using multiple groups like currency, institution, accounts & account type. This is available under the "Holdings Analyzer" tab. You can now analyze your holdings composition for a specific group by clicking the buttons below the chart. By default a donut chart is displayed and you can hide the positions using the radio toggle below.',images:["https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/holdings-composition-1_UVfpFJBzK.png","https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/holdings-composition-2_oGAlHs6Fn.png","https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/holdings-composition-3_-6MNRFG8u.png"]},{date:"2021-04-02",tab:"Holdings Analyzer",title:"Portfolio Visualizer Tool Links",description:"Portfolio Visualizer (https://www.portfoliovisualizer.com/) is an online software platform for portfolio and investment analytics to help you make informed decisions when comparing and analyzing portfolios and investment products. We have added links to portfolio visualizer tools with your holdings and allocation populated so that you can just click and run the reports easily.",link:Object(pe.jsx)(y.a.Link,{href:"https://www.portfoliovisualizer.com/",target:"_blank",children:"Portfolio Visualizer"}),images:["https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/portfolio-visualizer-1__UpG0quyW.png","https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/portfolio-visualizer-2_J54JNE5ON.png","https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/portfolio-visualizer-3_HOu1gLKPp.png"]},{date:"2021-03-31",tab:"Realized P&L",title:"Your realized/closed P/L aggregated by day/week/month/year & complete history",description:'If you are an active trader you would definitely want to keep track of your daily/weekly/monthly/yearly closed P/L. The new tab "Realized P&L" is exclusively added to simplify this usecase. You can see your closed/realized P/L aggregated by day/week/month/year. You can also see your closed/realized P/L transactions history with details.',images:["https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/realized-pnl-1_sbd3OZJL4.png","https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/realized-pnl-2_fHY3wBRDI.png","https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/realized-pnl-3_Lrlpbuenv.png"]},{date:"2021-03-23",tab:"Gainers/Losers",title:"View Gainers & Losers by P/L Value or Ratio",description:"You can now view the gainers & losers by P/L value in addition to P/L ratio. You can do this by using the new toggle in the Gainers/Losers tab.",images:["https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/show-by-pnl-value_GE8t6tOqe.png","https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/show-by-pnl-ratio_Q83tHPI5J.png"]},{date:"2021-03-20",title:"P/L Ratio (%) Change Developer Widget",description:"P/L Ratio (%) Change chart in the P/L charts is written as an elegant developer widget. The widget is submitted to wealthica team for publication. Incase you are interested in trying it out, click on the link below.",link:Object(pe.jsx)(y.a.Link,{href:"https://github.com/mani-coder/wealthica-pnl-widget",target:"_blank",children:"P/L Ratio (%) Change Developer Widget"}),images:["https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/pnl-widget-2_NEbh-d-O6.png","https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/pnl-widget-1_q9ZHNXGdU.png"]},{date:"2021-03-05",tab:"P&L Charts",title:"P&L % Change Over Multiple Time Periods Chart",description:"You can now view your P/L ratio (%) change across multiple pre-defined time periods like 1D(1 day), WTD(Week To Date), MTD(Month To Date), 1M(1 Month), YTD(Year To Date), FY 2020(Jan 1 -Dec 31, 2020) in the P&L Charts tab.",images:["https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/pnl-yoy-chart_F_NqYoQNP.png"]},{date:"2021-03-01",tab:"Holdings Analyzer",title:"Visualize Your Holdings Using Column/Pie Charts",description:'In this new tab "Holdings Analyzer", you can visualize your holdings in a column & pie chart. You can also click on a stock and view the details and load the stock price timeline with your transactions plotted on it for better visualization. You can also use the search bar to select a stock in case your aren\'t able to locate your stock in the charts. There is also a holdings table, incase you want to skim through all your holdings in a table view.',images:["https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/holdings-analyzer-1_SvA5pT4QD.png","https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/holdings-analyzer-2_6dh19zbOd.png","https://ik.imagekit.io/manicoder/wealthica-portfolio-addon/holdings-table_D9eT7TaFo.png"]}];function be(e){var t=e.index,n=e.style,a=Object(l.useState)(),i=Object(u.a)(a,2),o=i[0],r=i[1],s=fe[t];return Object(pe.jsx)(M.a,{py:2,style:n,children:Object(pe.jsxs)(ue.a.Item,{children:[Object(pe.jsx)(y.a.Title,{level:4,children:s.title}),Object(pe.jsxs)(M.b,{pb:3,children:[Object(pe.jsx)(re.a,{color:"magenta",children:D()(s.date).format("MMM DD, YYYY")}),s.tab&&Object(pe.jsxs)(re.a,{color:"purple",children:[s.tab," Tab"]})]}),s.description&&Object(pe.jsx)(y.a.Text,{children:s.description}),s.link&&Object(pe.jsx)(M.a,{py:1,children:s.link}),Object(pe.jsx)(M.b,{my:3,flexWrap:"wrap",children:s.images&&Object(pe.jsx)(pe.Fragment,{children:s.images.map((function(e){return Object(pe.jsx)(M.a,{mr:2,mb:2,onClick:function(){r(e),E("preview-change-log-image",{title:s.title})},style:{cursor:"pointer"},children:Object(pe.jsx)(le.a,{src:"".concat(e,"?tr=w-200,fo-auto"),width:200,preview:!1,fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg=="})},e)}))})}),Object(pe.jsx)(te.a,{}),Object(pe.jsx)(ie.a,{width:"fit-content",style:{maxWidth:"100%",top:10},closable:!0,maskClosable:!0,footer:null,visible:!!o,onCancel:function(){return r(void 0)},children:Object(pe.jsx)(M.b,{width:1,justifyContent:"center",children:o&&Object(pe.jsx)(le.a,{src:o,preview:!1})})})]},t)})}function me(){return Object(pe.jsx)(he,{children:function(e){var t=e.width;return Object(pe.jsx)(M.a,{py:3,children:Object(pe.jsx)(ce.b,{height:800,itemCount:fe.length,itemSize:function(){return t>1e3?425:t>600?525:600},width:"100%",children:function(e){var t=e.index,n=e.style;return Object(pe.jsx)(be,{index:t,style:n})}})})}})}function ye(){var e=function(e){try{return window.localStorage.getItem(e)}catch(t){}}(z);if(e){var t=D()(e);return fe.filter((function(e){return D()(e.date).isAfter(t)})).length}return fe.length}function ge(){!function(e,t){try{window.localStorage.setItem(e,t)}catch(n){}}(z,fe[0].date)}var ve=n(198),je=n.n(ve),xe=n(281),Oe=n.n(xe),Ae=n(206),ke=n(282);function we(e){var t=e.options;return t.series&&t.series.length?Object(pe.jsx)(je.a,{message:"Failed to load the chart!",children:Object(pe.jsx)(Oe.a,{highcharts:Ae,constructorType:e.constructorType,options:t,oneToOne:!0})}):Object(pe.jsx)(pe.Fragment,{})}n.n(ke)()(Ae);var Ce=a.a.memo(we),Pe=n(207),De=n.n(Pe);function Me(e){var t=e.title,n=e.closed,l=e.children;return Object(pe.jsx)(M.a,{my:3,children:Object(pe.jsx)(De.a,{defaultActiveKey:n?[]:["1"],expandIconPosition:"right",onChange:function(){return E("collapse-panel",{title:t})},children:Object(pe.jsx)(De.a.Panel,{header:t,style:{backgroundColor:"#f9f0ff"},children:l},"1")})})}function _e(e){return Object(pe.jsx)(Me,{title:"Deposits Vs Portfolio Value Timeline",children:Object(pe.jsx)(Ce,{constructorType:"stockChart",options:{title:{text:"Deposits Vs Portfolio Value"},subtitle:{text:"This chart shows the total (deposits - withdrawals) made by you and the value of your portfolio value over the selected period of time.",style:{color:"#1F2A33"}},rangeSelector:{selected:1,enabled:!1,inputEnabled:!1},navigator:{enabled:!0},scrollbar:{enabled:!1},yAxis:[{crosshair:{dashStyle:"Dash"},labels:{enabled:!e.isPrivateMode},opposite:!1}],plotOptions:{},tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.displayValue}</b><br/>',valueDecimals:2,split:!0},responsive:{rules:[{condition:{maxWidth:500},chartOptions:{chart:{height:300},subtitle:{text:void 0},yAxis:[{labels:{enabled:!1}},{labels:{enabled:!1}}],navigator:{enabled:!1}}}]},series:[{id:"portfolio",name:"Portfolio",data:e.portfolios.map((function(t){return{x:D()(t.date).valueOf(),y:t.value,displayValue:e.isPrivateMode?"-":Number(t.value.toFixed(2)).toLocaleString()}})),type:"spline",color:"#4E2E5E"},{id:"deposits",name:"Deposits",data:e.portfolios.map((function(t){return{x:D()(t.date).valueOf(),y:t.deposits,displayValue:e.isPrivateMode?"-":Number(t.deposits.toFixed(2)).toLocaleString()}})),type:"spline",color:"#C00316"}]}})})}var Se=a.a.memo(_e),Ee=n(113),Te=n.n(Ee),Fe=n(82),Ye=n.n(Fe),Le=n(585),ze=n(209),Ie=n(283),Qe=n.n(Ie),Re=n(63),Be=n.n(Re);function Ne(e){var t=e.types,n=e.onChange;function l(e,l,a){var i=t.includes(e);return Object(pe.jsx)(re.a,{style:{cursor:"pointer"},color:i?l:void 0,onClick:function(){n(i?t.filter((function(t){return t!==e})):t.concat([e]))},children:a})}return Object(pe.jsxs)(M.a,{children:[l("earning","magenta","Earning"),l("ex-dividend","blue","ED: Ex-Dividend"),l("pay-dividend","green","PD: Pay Dividend"),l("rec-dividend","geekblue","RD: Record Dividend")]})}function qe(e){var t=e.positions,n=Object(l.useState)(),a=Object(u.a)(n,2),i=a[0],o=a[1],r=Object(l.useState)(!1),s=Object(u.a)(r,2),c=s[0],d=s[1],p=Object(l.useState)(D()().startOf("month")),h=Object(u.a)(p,2),f=h[0],b=h[1],m=Object(l.useMemo)((function(){return{start:D()().startOf("month").subtract(1,"month"),end:D()().endOf("month").add(1,"year")}}),[]),g=Object(l.useState)(["earning","ex-dividend","pay-dividend","rec-dividend"]),v=Object(u.a)(g,2),j=v[0],x=v[1];Object(l.useEffect)((function(){var e=t.filter((function(e){var t=e.security.symbol||e.security.name;return!(t.includes("-")||t.includes(".")||"crypto"===e.security.type)})).map((function(e){return N(e.security)})).join(",");if(e.length){var n=G("https://portfolio.nasdaq.com/api/portfolio/getPortfolioEvents/?fromDate=".concat(f.clone().subtract(30,"days").format("YYYY-MM-DD"),"&toDate=").concat(f.clone().endOf("month").add(60,"days").format("YYYY-MM-DD"),"&tickers=").concat(e));d(!0),fetch(n,{cache:"force-cache",method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){e&&o({dividends:e.dividends,earnings:e.earnings})})).catch((function(e){return console.info("Failed to load events.",e)})).finally((function(){return d(!1)}))}}),[t,f]);var A=Object(l.useMemo)((function(){if(!i)return{};var e={};return j.includes("earning")&&(e=i.earnings.reduce((function(e,t){var n=D()(t.date).format("YYYY-MM-DD"),l=e[n];return l||(l=[],e[n]=l),l.push({ticker:q(t.ticker),name:t.company,type:"earning"}),e}),e)),e=i.dividends.reduce((function(e,t){return["exDate","payDate","recDate"].forEach((function(n){if(t[n]){var l="exDate"===n?"ex-dividend":"payDate"===n?"pay-dividend":"rec-dividend";if(j.includes(l)){var a=D()(t[n]).format("YYYY-MM-DD"),i=e[a];i||(i=[],e[a]=i),i.push({ticker:q(t.ticker),name:t.company,type:l})}}})),e}),e)}),[i,j]);return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(y.a.Title,{level:3,style:{textAlign:"center"},children:"Earnings & Dividends"}),Object(pe.jsx)(Qe.a,{value:f,onSelect:function(e){var t=e.startOf("month");f.isSame(t)||b(t)},validRange:[D()().startOf("month"),D()().endOf("month").add(1,"year")],dateCellRender:function(e){var t=A[e.format("YYYY-MM-DD")];return t&&t.length?Object(pe.jsx)(M.b,{flexWrap:"wrap",children:t.map((function(e){return Object(pe.jsx)(M.a,{mr:1,mb:1,children:Object(pe.jsxs)(re.a,{color:"earning"===e.type?"magenta":"ex-dividend"===e.type?"blue":"pay-dividend"===e.type?"green":"geekblue",children:["earning"===e.type?"":"ex-dividend"===e.type?"ED: ":"pay-dividend"===e.type?"PD: ":"RD: ",e.ticker]})},e.ticker)}))}):Object(pe.jsx)(pe.Fragment,{})},headerRender:function(){return Object(pe.jsxs)(M.a,{children:[Object(pe.jsxs)(M.b,{justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",children:[Object(pe.jsx)(ze.a,{loading:c,disabled:f.isSameOrBefore(m.start),type:"primary",icon:Object(pe.jsx)(Te.a,{}),onClick:function(){b(f.subtract(1,"month").clone()),E("event-calendar-action",{action:"previous"})},children:"Prev Month"}),Object(pe.jsxs)(y.a.Title,{level:3,children:[f.format("MMMM YYYY")," ",c&&Object(pe.jsx)(O.a,{})]}),Object(pe.jsxs)(ze.a,{loading:c,disabled:f.clone().endOf("month").isSameOrAfter(m.end),type:"primary",onClick:function(){E("event-calendar-action",{action:"next"}),b(f.add(1,"month").clone())},children:["Next Month ",Object(pe.jsx)(Ye.a,{})]})]}),Object(pe.jsx)(M.b,{my:2,justifyContent:"center",flexWrap:"wrap",children:Object(pe.jsx)(Ne,{types:j,onChange:x})})]})}}),(null===i||void 0===i?void 0:i.earnings)&&!!(null===i||void 0===i?void 0:i.earnings.length)&&Object(pe.jsx)(Le.a,{title:Object(pe.jsxs)(pe.Fragment,{children:["Upcoming Earnings (Starting ",f.format("MMM DD, YYYY"),")"]}),headStyle:{paddingLeft:16,fontSize:18,fontWeight:"bold"},style:{marginTop:16,marginBottom:16},bodyStyle:{padding:0},children:Object(pe.jsx)(Be.a,{columns:[{key:"date",title:"Date",dataIndex:"date",render:function(e){return D()(e).format("MMM DD, YYYY")},defaultSortOrder:"ascend",sorter:function(e,t){return D()(e.date).valueOf()-D()(t.date).valueOf()}},{key:"Company",title:"Symbol",dataIndex:"ticker",render:function(e){return q(e)}},{key:"periodEnding",title:"Period Ending",dataIndex:"periodEnding"},{key:"lastEps",title:"Last EPS",dataIndex:"lastEps",align:"right"},{key:"eps",title:"EPS",dataIndex:"eps",align:"right"}],dataSource:i.earnings.filter((function(e){return D()(e.date).isSameOrAfter(f)}))})})]})}var Ue=n(101),He=n(210),Ve=n(164),Ge=n.n(Ve),Je=n(114),We=n(50),Ke=n.n(We);function Ze(e){var t=e.group,n=void 0===t?"currency":t,l=e.changeGroup,a=e.tracker;return Object(pe.jsxs)(M.b,{width:1,flexDirection:"column",alignItems:"center",py:2,mb:2,children:[Object(pe.jsx)(y.a.Title,{level:4,children:"Group By"}),Object(pe.jsx)(Ke.a.Group,{optionType:"button",buttonStyle:"solid",defaultValue:n,onChange:function(e){l(e.target.value),E(a,{group:e.target.value})},options:[{label:"USD vs CAD",value:"currency"},{label:"Account Type",value:"type"},{label:"Institution",value:"institution"},{label:"Account",value:"accounts"}]})]})}function Xe(e,t){if(!t)return"N/A";switch(e){case"currency":return t.currency.toUpperCase();case"type":return t.type;case"institution":return t.instutitionName;default:return t.name}}var $e=n(291);function et(e){var t=e.label,n=e.value,l=e.valueProps,a=Object($e.a)(e,["label","value","valueProps"]);return Object(pe.jsxs)(M.b,Object(T.a)(Object(T.a)({justifyContent:"space-between",py:1,style:{borderBottom:"1px solid #f0f0f0"}},a),{},{children:[Object(pe.jsx)(y.a.Text,{strong:!0,children:t}),Object(pe.jsx)(y.a.Text,Object(T.a)(Object(T.a)({},l),{},{children:n}))]}))}function tt(e){var t=e.positions.reduce((function(e,t){return e+t.market_value}),0),n=e.positions.find((function(t){return B(t.security)===e.symbol}));if(!n)return Object(pe.jsx)(pe.Fragment,{});var l=(e.accounts||[]).map((function(t){var n=t.positions.filter((function(t){return t.symbol===e.symbol}))[0];return n?{name:t.name,quantity:n.quantity}:void 0})).filter((function(e){return e})).sort((function(e,t){return t.quantity-e.quantity})),a=n.security.currency?n.security.currency.toUpperCase():n.security.currency;return Object(pe.jsxs)(M.b,{flexDirection:"column",p:2,children:[Object(pe.jsx)(et,{label:"Symbol",value:B(n.security)}),Object(pe.jsx)(et,{label:"Value",value:"CAD ".concat(e.isPrivateMode?"-":R(n.market_value)," (").concat((n.market_value?n.market_value/t*100:0).toFixed(2),"%)")}),Object(pe.jsx)(et,{label:"Proft/Loss",value:"CAD ".concat(e.isPrivateMode?"-":R(n.gain_amount)," (").concat((n.gain_percent?100*n.gain_percent:n.gain_percent||0).toFixed(2),"%)"),valueProps:{type:n.gain_percent>0?void 0:"danger"}}),Object(pe.jsx)(et,{label:"Shares",value:"".concat(n.quantity)}),Object(pe.jsx)(et,{label:"Currency",value:a}),Object(pe.jsx)(et,{label:"Buy Price",value:R(n.investments.reduce((function(e,t){return e+t.book_value}),0)/n.quantity)}),Object(pe.jsx)(et,{label:"Last Price",value:R(n.security.last_price)}),Object(pe.jsx)(et,{label:"Account",value:"Shares",valueProps:{strong:!0},pt:2,style:{borderBottom:"2px solid #7b7b7b"}}),l.map((function(e){return e&&Object(pe.jsx)(et,{label:e.name,value:"".concat(e.quantity)},e.name)}))]})}var nt=function(e){Object(h.a)(n,e);var t=Object(f.a)(n);function n(e){var l;return Object(d.a)(this,n),(l=t.call(this,e))._mounted=void 0,l.getFlags=function(e,t){var n=["buy","sell"].includes(e);return{name:C.a.startCase(e),shape:"squarepin",type:"flags",onSeries:t?void 0:"dataseries",width:25,tooltip:{pointFormat:"<b>{point.text}</b>",valueDecimals:2,split:!0},data:l.props.position.transactions.filter((function(t){return t.type===e})).sort((function(e,t){return e.date.valueOf()-t.date.valueOf()})).reduce((function(e,t){var n=e.pop();return n&&n.date.valueOf()===t.date.valueOf()?e.push(Object(T.a)(Object(T.a)({},n),{},{shares:t.shares&&n.shares?n.shares+t.shares:n.shares,amount:t.amount+n.amount,price:t.price&&n.price?(Number(t.price)+Number(n.price))/2:n.price})):(n&&e.push(n),e.push(t)),e}),[]).map((function(t){return{transaction:t,x:t.date.valueOf(),title:n?Math.round(t.shares):e.charAt(0).toUpperCase(),text:n?"".concat(C.a.startCase(e),": ").concat(t.shares,"@").concat(t.price):"".concat(C.a.startCase(e),": $").concat(V(t.amount,2))}})),color:L[e],fillColor:L[e],style:{color:"white"}}},l.state={loading:!0},l._mounted=!1,l}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this._mounted=!0,this.fetchData()}},{key:"componentDidUpdate",value:function(e){this.props.symbol!==e.symbol&&this.fetchData()}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"parseSecuritiesResponse",value:function(e){var t=this;if(this._mounted){var n,l="crypto"===this.props.position.security.type,a=I(e.to),i=[];e.data.filter((function(e){return e})).reverse().forEach((function(e){n||(n=e),100*Math.abs((e-n)/e)>200&&(e=n),(a.isoWeekday()<=5||l)&&i.push({timestamp:a.clone(),closePrice:l?Q(a,e,t.props.currencyCache):e}),a.subtract(1,"days"),n=e}));var o=i.sort((function(e,t){return e.timestamp.valueOf()-t.timestamp.valueOf()}));this.setState({loading:!1,data:o})}}},{key:"fetchData",value:function(){var e=this;if(this._mounted){this.setState({loading:!0}),E("stock-timeline");var t=D.a.min((this.props.position.transactions&&this.props.position.transactions.length?this.props.position.transactions[0].date:D()()).clone().subtract(1,"months"),D()().subtract(6,"months"));if(this.props.addon)this.props.addon.request({query:{},method:"GET",endpoint:"securities/".concat(this.props.position.security.id,"/history?from=").concat(t.format("YYYY-MM-DD"))}).then((function(t){e.parseSecuritiesResponse(t)})).catch((function(e){return console.log(e)}));else{var n="https://app.wealthica.com/api/securities/".concat(this.props.position.security.id,"/history?from=").concat(t.format("YYYY-MM-DD"));console.debug("Fetching stock data..",n),fetch(G(n),{cache:"force-cache",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.parseSecuritiesResponse(t)})).catch((function(e){return console.log(e)}))}}}},{key:"fetchDataUsingYahoo",value:function(){var e=this;if(this._mounted){this.setState({loading:!0});var t=(this.props.position.transactions&&this.props.position.transactions.length?this.props.position.transactions[0].date:D()()).clone().subtract(1,"months"),n=D()().unix(),l="https://query1.finance.yahoo.com/v7/finance/chart/".concat(this.props.symbol,"?period1=").concat(t.unix(),"&period2=").concat(n,"&interval=1d&events=history");console.debug("Fetching stock data..",l),fetch(G(l),{cache:"force-cache",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e._mounted&&e.setState({loading:!1,data:t})})).catch((function(e){return console.log(e)}))}}},{key:"getSeries",value:function(){if(!this.state.data)return[{}];var e,t,n,l,a=[];return this.state.data.forEach((function(i,o){var r=i.timestamp.valueOf(),s=i.closePrice;a.push({x:r,y:s}),0===o&&(t=e=s,n=l=r),s<e&&(e=s,n=r),s>t&&(t=s,l=r)})),[{id:"dataseries",name:this.props.symbol,data:a,type:"line",tooltip:{valueDecimals:2}},{name:"High/Low",shape:"circlepin",type:"flags",tooltip:{pointFormat:"<b>{point.text}</b>",valueDecimals:2,split:!0},data:[{x:n,title:"L",text:"Low Price: $".concat(V(e,2))},{x:l,title:"H",text:"High Price: $".concat(V(t,2))}].sort((function(e,t){return e.x-t.x})),color:"#7cb5ec",fillColor:"#7cb5ec",style:{color:"white"}},this.getFlags("buy"),this.getFlags("sell"),this.getFlags("income",!0),this.getFlags("dividend",!0),this.getFlags("distribution",!0),this.getFlags("tax",!0),this.getFlags("fee",!0)]}},{key:"getOptions",value:function(){var e=this.props.position.transactions.filter((function(e){return"dividend"===e.type})).reduce((function(e,t){return e+t.amount}),0);return{title:{text:"".concat(this.props.symbol),style:{color:"#1F2A33",textDecoration:"underline",fontWeight:"bold"}},subtitle:{text:this.props.isPrivateMode?"Shares: -, Market Value: -, Profit: -":"Shares: ".concat(this.props.position.quantity,"@").concat(R(this.props.position.investments.reduce((function(e,t){return e+t.book_value}),0)/this.props.position.quantity),", Market Value: CAD ").concat(V(this.props.position.market_value,2),", P/L:  ").concat(R(100*this.props.position.gain_percent,2),"% / CAD ").concat(V(this.props.position.gain_amount,2)).concat(e?", Dividends: CAD ".concat(V(e,2)):""),style:{color:"#1F2A33",fontWeight:"bold"}},rangeSelector:{selected:1,enabled:!0,inputEnabled:!1},navigator:{enabled:!1},scrollbar:{enabled:!1},yAxis:[{crosshair:{dashStyle:"Dash"},title:{text:"Price ($)"},opposite:!1}],tooltip:{pointFormat:"{series.name}: <b>${point.y}",valueDecimals:2,split:!0},responsive:{rules:[{condition:{maxWidth:500},chartOptions:{chart:{height:300},subtitle:{text:void 0},navigator:{enabled:!1}}}]},series:this.getSeries(),legend:{enabled:!0}}}},{key:"render",value:function(){return this.state.loading?Object(pe.jsx)("div",{style:{textAlign:"center",margin:"12px"},children:Object(pe.jsx)(O.a,{size:"large"})}):Object(pe.jsx)(Ce,{constructorType:"stockChart",options:this.getOptions()})}}]),n}(l.Component),lt={pointFormatter:function(){var e=this.options;return"Cash"!==e.name?'<table width="100%">\n      <tr><td>Weightage</td><td class="position-tooltip-value">'.concat(this.percentage.toFixed(1),'%</td></tr>\n      <tr><td>Value</td><td class="position-tooltip-value">CAD ').concat(e.value,'</td></tr>\n      <tr><td>Unrealized P/L %</td><td class="position-tooltip-value" style="color: ').concat(e.pnlColor,';">').concat(e.gain?e.gain.toFixed(1):"n/a",'%</td></tr>\n      <tr><td>Unrealized P/L $</td><td class="position-tooltip-value" style="color: ').concat(e.pnlColor,';">CAD ').concat(e.profit,'</td></tr>\n      <tr><td>Shares</td><td style="text-align: right;">').concat(e.shares,'</td></tr>\n      <tr><td>Currency</td><td style="text-align: right;">').concat(e.currency,'</td></tr>\n      <tr><td>Buy Price</td><td style="text-align: right;">').concat(e.buyPrice,'</td></tr>\n      <tr><td>Last Price</td><td style="text-align: right;">').concat(e.lastPrice,'</td></tr>\n      <tr><td colspan="2"><hr /></td></tr>\n      <tr style="font-weight: 600"><td>Account</td><td style="text-align: right;">Shares</td></tr>\n      ').concat(e.accountsTable,"\n    </table>"):'\n      <table width="100%">\n        <tr><td>Weightage</td><td class="position-tooltip-value">'.concat(this.percentage.toFixed(1),'%</td></tr>\n        <tr><td>Value</td><td class="position-tooltip-value">CAD ').concat(e.value,'</td></tr>\n        <tr><td colspan="2"><hr /></td></tr>\n        <tr style="font-weight: 600"><td>Account</td><td style="text-align: right;">Cash</td></tr>\n        ').concat(e.accountsTable,"\n      </table>")},headerFormat:"<b>{point.key}</b><hr />"};function at(e){var t=Object(l.useState)(),n=Object(u.a)(t,2),a=n[0],i=n[1],o=Object(l.useState)("currency"),r=Object(u.a)(o,2),s=r[0],c=r[1],d=Object(l.useState)(!0),p=Object(u.a)(d,2),h=p[0],f=p[1],b=Object.keys(e.currencyCache),m=b[b.length-1],g=Je.getOptions().colors;function v(e){return g?g[e%(null===g||void 0===g?void 0:g.length)]:void 0}var j=function(t,n){var l=e.accounts.reduce((function(e,n){var l=Xe(t,n),a=e[l];return a||(a={name:l,value:0,positions:{},accounts:[]},e[l]=a),a.value+=n.positions.reduce((function(e,t){return e+t.value}),0),n.positions.forEach((function(e){var t=B(e.security),n=a.positions[t];if(n){var l=n.value+e.value,i=n.gain_amount+e.gain_amount;a.positions[t]=Object(T.a)(Object(T.a)({},n),{},{value:l,book_value:n.book_value+e.book_value,market_value:n.market_value+e.market_value,quantity:n.quantity+e.quantity,gain_currency_amount:n.gain_currency_amount+e.gain_currency_amount,gain_amount:i,gain_percent:i/(l-i)})}else a.positions[t]=e})),a.accounts.push(n),e}),{}),a=function(t,a){var i=l[t],o=Object.values(i.positions),r=o.length,s=o.sort((function(e,t){return t.value-e.value})).map((function(t,n){var l=B(t.security),o=i.accounts.map((function(e){var t=e.positions.filter((function(e){return e.symbol===l}))[0];return t?{name:e.name,quantity:t.quantity}:void 0})).filter((function(e){return e})).sort((function(e,t){return t.quantity-e.quantity})).map((function(e){return"<tr><td>".concat(e.name,'</td><td style="text-align: right;">').concat(e.quantity,"</td></tr>")})).join(""),s=.2-n/r/5,u=v(a);return{color:u&&h?Je.color(u).brighten(s).get():void 0,name:l,y:t.value,displayValue:e.isPrivateMode?"-":V(t.value,1),value:e.isPrivateMode?"-":R(t.value),gain:t.gain_percent?100*t.gain_percent:t.gain_percent,profit:e.isPrivateMode?"-":R(t.gain_amount),buyPrice:R(t.book_value/t.quantity),shares:t.quantity,lastPrice:R(t.security.last_price),currency:t.security.currency?t.security.currency.toUpperCase():t.security.currency,pnlColor:t.gain_amount>=0?"green":"red",accountsTable:o}}));return n?{type:"pie",id:t,name:t,data:s,tooltip:lt,dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:"black"}}}:s};return n?{activeAxisLabelStyle:{textDecoration:"none"},activeDataLabelStyle:{textDecoration:"none"},series:Object.keys(l).map((function(e,t){return a(e,t)}))}:{type:"pie",id:"holdings",name:"Holdings",size:"80%",innerSize:"60%",dataLabels:{formatter:function(){var e=this.point;return this.percentage&&this.percentage>2.5?"".concat(e.name,": ").concat(this.percentage.toFixed(1),"%"):null}},data:Object.keys(l).sort((function(e,t){return l[t].value-l[e].value})).reduce((function(e,t,n){return e.push.apply(e,Object(Ue.a)(a(t,n))),e}),[]),tooltip:lt}};function x(t){var n=function(t){var n=e.accounts.reduce((function(e,t){return e+t.value}),0),l=Object.values(e.accounts.reduce((function(e,n){var l=Xe(t,n),a=e[l];a||(a={name:l,value:0,gainAmount:0,accounts:{}},e[l]=a),a.value+=n.positions.reduce((function(e,t){return e+t.value||0}),0),a.gainAmount+=n.positions.reduce((function(e,t){return e+t.gain_amount}),0);var i=n.name,o=a.accounts[i];o||(o={name:i,cad:0,usd:0,value:0},a.accounts[i]=o);var r=n.cash?Number(n.cash.toFixed(2)):0;return o.cad=o.cad+("cad"===n.currency?r:0),o.usd=o.usd+("usd"===n.currency?r:0),e}),{})),a={type:"pie",id:"accounts",name:"Accounts",size:h?"60%":"100%",data:l.filter((function(e){return e.value})).sort((function(e,t){return t.value-e.value})).map((function(t,l){var a=Object.values(t.accounts),i=a.reduce((function(e,t){return e+t.cad}),0),o=a.reduce((function(e,t){return e+t.usd}),0),r=a.filter((function(e){return!!e.cad||!!e.usd})).sort((function(e,t){return t.usd+t.cad-(e.usd+e.cad)})).map((function(e){return'<tr>\n                <td style="vertical-align: top">'.concat(e.name,'</td>\n                <td style="text-align: right;">\n                ').concat(e.cad?'<div style="color:'.concat(e.cad<0?"red":"",'">C$ ').concat(R(e.cad),"</div>"):"","\n                ").concat(e.usd?'<span style="color:'.concat(e.usd<0?"red":"",'">U$ ').concat(R(e.usd),"</span>"):"","\n                </td>\n              </tr>")})).join("");return{color:v(l),name:t.name,drilldown:h?void 0:t.name,y:t.value,displayValue:e.isPrivateMode?"-":t.value?R(t.value):t.value,totalValue:e.isPrivateMode?"-":R(n),gain:e.isPrivateMode?"-":"CAD ".concat(R(t.gainAmount)),gainRatio:"".concat((t.gainAmount/(t.value-t.gainAmount)*100).toFixed(2),"%"),pnlColor:t.gainAmount>=0?"green":"red",cash:i+(o?Q(m,o,e.currencyCache):0),cad:i,usd:o,cashTable:r}})),dataLabels:{formatter:function(){return this.percentage&&this.percentage>(h?2:0)?"".concat(this.point.name,": ").concat(this.percentage.toFixed(1),"%"):null},style:h?{color:"purple",fontSize:"12px",fontWeight:"600"}:{},distance:h?150:50},tooltip:{headerFormat:"<b>{point.key}<br />{point.percentage:.1f}%</b><hr />",pointFormatter:function(){var t=this.options;return'<table>\n          <tr><td>Value</td><td style="text-align: right;" class="position-tooltip-value">CAD '.concat(t.displayValue,'</td></tr>\n          <tr><td>Total Value</td><td style="text-align: right;" class="position-tooltip-value">CAD ').concat(t.totalValue,'</td></tr>\n          <tr><td>Unrealized P/L ($) </td><td style="text-align: right;" style="color:').concat(t.pnlColor,';" class="position-tooltip-value">').concat(t.gain,'</td></tr>\n          <tr><td>Unrealized P/L (%)</td><td style="text-align: right;" style="color:').concat(t.pnlColor,';" class="position-tooltip-value">').concat(t.gainRatio,"</td></tr>\n          ").concat(t.cashTable?'<tr><td colspan="2"><hr /></td></tr>\n              <tr><td style="font-weight: 600">Account</td><td style="text-align: right;" style="font-weight: 600">Cash</td></tr>'.concat(t.cashTable):"",'\n          <tr><td colspan="2"><hr /></td></tr>\n          ').concat(t.cash&&!e.isPrivateMode?'<tr><td>Total Cash</td><td style="text-align: right;" class="position-tooltip-cash" style="color:'.concat(t.cash<0?"red":"",';">CAD ').concat(R(t.cash),"</td></tr>"):"","\n          ").concat(t.cad&&!e.isPrivateMode?'<tr><td>CAD Cash</td><td style="text-align: right;" class="position-tooltip-cash" style="color:'.concat(t.cad<0?"red":"",';">CAD ').concat(R(t.cad),"</td></tr>"):"","\n          ").concat(t.usd&&!e.isPrivateMode?'<tr><td>USD Cash</td><td style="text-align: right;" class="position-tooltip-cash" style="color:'.concat(t.usd<0?"red":"",';">USD ').concat(R(t.usd),"</td></tr>"):"","\n        </table>")}}};return h?[a,j(t,!1)]:[a]}(t),l=h?void 0:j(t,!0),a="currency"===t?"USD vs CAD":"type"===t?"Account Type":"".concat(C.a.startCase(t));return{series:n,drilldown:l,title:"".concat(a," Composition")}}var O=function(t){var n=t.title,l=t.yAxisTitle,a=t.subtitle,i=t.series,o=t.drilldown;return{series:i,drilldown:o||{},tooltip:{outside:!0,useHTML:!0,backgroundColor:"#FFF",style:{color:"#1F2A33"}},title:{text:n},subtitle:{text:a,style:{color:"#1F2A33"}},xAxis:{type:"category",labels:{rotation:-45,style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}},yAxis:{labels:{enabled:!e.isPrivateMode},title:{text:l}}}},A=Object(l.useMemo)((function(){return function(){var t=e.positions.reduce((function(e,t){return e+t.market_value}),0),n=e.positions.sort((function(e,t){return t.value-e.value})).map((function(n){var l=B(n.security),a=(e.accounts||[]).map((function(e){var t=e.positions.filter((function(e){return e.symbol===l}))[0];return t?{name:e.name,quantity:t.quantity}:void 0})).filter((function(e){return e})).sort((function(e,t){return t.quantity-e.quantity})).map((function(e){return"<tr><td>".concat(e.name,'</td><td style="text-align: right;">').concat(e.quantity,"</td></tr>")})).join("");return{name:B(n.security),y:n.value,displayValue:e.isPrivateMode?"-":V(n.value,1),value:e.isPrivateMode?"-":R(n.value),gain:n.gain_percent?100*n.gain_percent:n.gain_percent,profit:e.isPrivateMode?"-":R(n.gain_amount),percentage:n.market_value/t*100,buyPrice:R(n.investments.reduce((function(e,t){return e+t.book_value}),0)/n.quantity),shares:n.quantity,lastPrice:R(n.security.last_price),currency:n.security.currency?n.security.currency.toUpperCase():n.security.currency,accountsTable:a,pnlColor:n.gain_amount>0?"green":"red"}})),l={click:function(e){e.point.name&&a!==e.point.name&&i(e.point.name)}};return{column:{type:"column",name:"Holdings",colorByPoint:!0,data:n,events:l,tooltip:lt,dataLabels:{enabled:!e.isPrivateMode,format:"{point.displayValue}"},showInLegend:!1},pie:{type:"pie",name:"Holdings",data:n.map((function(e){return Object(T.a)(Object(T.a)({},e),{},{drilldown:void 0})})),events:l,allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:"black"}},tooltip:lt}}}()}),[e.accounts,e.positions,e.isPrivateMode]),k=A.column,w=A.pie,P=Object(l.useMemo)((function(){return O({title:"Your Holdings",yAxisTitle:"Market Value ($)",subtitle:"(click on a stock to view transactions)",series:[k]})}),[k]),D=Object(l.useMemo)((function(){return O({subtitle:"(click on a stock to view timeline and transactions)",series:[w]})}),[w]),_=Object(l.useMemo)((function(){var e=x(s),t=e.series,n=e.drilldown,l=e.title;return O({title:l,subtitle:h?void 0:"(click on the category name to drill into the holdings.)",series:t,drilldown:n})}),[e.isPrivateMode,e.accounts,e.positions,w,s,h]);return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(Ce,{options:P}),Object(pe.jsxs)(M.b,{width:1,flexWrap:"wrap",alignItems:"stretch",children:[Object(pe.jsx)(M.b,{width:[1,1,2/3],height:"100%",justifyContent:"center",children:Object(pe.jsx)(Ce,{options:D})}),Object(pe.jsx)(M.b,{width:[1,1,1/3],pr:4,height:"100%",justifyContent:"center",children:function(){var t=e.positions.map((function(e){return B(e.security)})).sort().map((function(e,t){return Object(pe.jsx)(He.a.Option,{value:e,children:e},t)}));return Object(pe.jsxs)(M.b,{p:3,pt:3,width:1,flexDirection:"column",children:[Object(pe.jsx)(y.a.Title,{style:{textAlign:"center"},level:4,children:"Search for a stock in your protofolio:"}),Object(pe.jsx)(He.a,{showSearch:!0,value:a,placeholder:"Enter a stock, e.g: FB, SHOP.TO",showArrow:!0,style:{width:"100%"},onChange:function(e){return i(e)},filterOption:function(e,t){return-1!==t.props.value.toUpperCase().indexOf(e.toUpperCase())},children:t}),a&&Object(pe.jsx)(tt,{symbol:a,positions:e.positions,accounts:e.accounts,isPrivateMode:e.isPrivateMode})]})}()})]}),function(){if(!a)return Object(pe.jsx)(pe.Fragment,{});var t=e.positions.filter((function(e){return B(e.security)===a}))[0];return t?Object(pe.jsx)(nt,{isPrivateMode:e.isPrivateMode,symbol:a,position:t,addon:e.addon,currencyCache:e.currencyCache}):Object(pe.jsx)(pe.Fragment,{})}(),Object(pe.jsxs)(Me,{title:"Holdings Composition",children:[Object(pe.jsx)(Ce,{options:_},s),Object(pe.jsx)(Ze,{changeGroup:c,group:s,tracker:"holdings-composition-group"}),Object(pe.jsxs)(M.b,{mt:3,mb:2,width:1,justifyContent:"center",alignItems:"center",alignContent:"center",children:[Object(pe.jsx)(Ge.a,{checked:h,onChange:function(e){f(e),E("composition-group-show-holdings",{checked:e})}}),Object(pe.jsx)(M.a,{px:1}),Object(pe.jsx)(y.a.Text,{strong:!0,style:{fontSize:16},children:"Show Holdings (Donut Chart)"})]})]})]})}var it=n(5),ot=n.n(it);function rt(e){var t=e.columns,n=void 0===t?[]:t,a=e.scroll,i=Object(l.useState)(0),o=Object(u.a)(i,2),r=o[0],s=o[1],c=n.map((function(e){return e.width?e:Object(T.a)(Object(T.a)({},e),{},{width:Math.floor(r/n.length)})})),d=Object(l.useRef)(),p=Object(l.useState)((function(){var e={};return Object.defineProperty(e,"scrollLeft",{get:function(){return null},set:function(e){d.current&&d.current.scrollTo({scrollLeft:e})}}),e})),h=Object(u.a)(p,1)[0],f=function(){d&&d.current&&d.current.resetAfterIndices({columnIndex:0,shouldForceUpdate:!1})};Object(l.useEffect)((function(){return f}),[r]);return Object(pe.jsx)(de.default,{onResize:function(e){var t=e.width;return s(t)},children:Object(pe.jsx)(Be.a,Object(T.a)(Object(T.a)({},e),{},{className:"virtual-table",columns:c,pagination:!1,components:{body:function(e,t){var l=t.scrollbarSize,i=t.ref,o=t.onScroll;i.current=h;var s=54*e.length;return Object(pe.jsx)(ce.a,{ref:d,className:"virtual-grid",columnCount:n.length,columnWidth:function(e){var t=c[e].width;return s>a.y&&e===n.length-1?t-l-1:t},height:a.y,rowCount:e.length,rowHeight:function(){return 64},width:r,onScroll:function(e){var t=e.scrollLeft;o({scrollLeft:t})},children:function(t){var l=t.columnIndex,a=t.rowIndex,i=t.style,o=e[a],r=n[l],s=r.dataIndex?o[r.dataIndex]:void 0;return Object(pe.jsx)("div",{className:ot()("virtual-table-cell ant-table-cell",{"virtual-table-cell-last":l===n.length-1}),style:Object(T.a)(Object(T.a)({},i),{},{textAlign:r.align}),children:r.render?r.render(s,o):s})}})}}}))})}function st(e){var t=e.positions.reduce((function(e,t){return e+t.market_value}),0);return Object(pe.jsx)("div",{className:"zero-padding",children:Object(pe.jsx)(Me,{title:"Holdings Table",children:Object(pe.jsx)(rt,{scroll:{y:600},dataSource:e.positions,columns:[{key:"symbol",title:"Symbol",dataIndex:"security.name",render:function(e,t){return Object(pe.jsx)(y.a.Link,{rel:"noreferrer noopener",href:"https://finance.yahoo.com/quote/".concat(B(t.security)),target:"_blank",children:B(t.security)})},width:200,sorter:function(e,t){return B(e.security).localeCompare(B(t.security))}},{key:"country",title:"Country",dataIndex:"security.currency",render:function(e,t){return"usd"===t.security.currency?"US":"CA"},sorter:function(e,t){return e.security.currency.localeCompare(t.security.currency)},width:120},{key:"lastPrice",title:"Last Price",align:"right",dataIndex:"security.last_price",render:function(e,t){return Object(pe.jsxs)(pe.Fragment,{children:[R(t.security.last_price),Object(pe.jsx)("div",{style:{fontSize:11},children:t.security.currency.toUpperCase()})]})},sorter:function(e,t){return e.security.last_price-t.security.last_price}},{key:"shares",title:"Shares",dataIndex:"quantity",render:function(e){return Object(pe.jsx)(y.a.Text,{strong:!0,children:R(e,0)})},align:"right",sorter:function(e,t){return e.quantity-t.quantity}},{key:"buyPrice",title:"Avg Cost / Share",dataIndex:"quantity",render:function(e,t){return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsxs)(y.a.Text,{strong:!0,children:[R(t.investments.reduce((function(e,t){return e+t.book_value}),0)/t.quantity)," "]}),Object(pe.jsx)("div",{style:{fontSize:11},children:t.security.currency.toUpperCase()})]})},align:"right"},{key:"gainPercent",title:Object(pe.jsxs)(pe.Fragment,{children:["Profit / Loss %",Object(pe.jsx)("div",{style:{fontSize:12},children:"CAD"})]}),dataIndex:"gain_percent",render:function(e,t){return Object(pe.jsxs)(M.a,{style:{color:t.gain_percent<0?"red":"green"},children:[Object(pe.jsxs)(y.a.Text,{strong:!0,style:{color:"inherit",fontSize:14},children:[R(100*t.gain_percent),"%"]}),Object(pe.jsx)(M.a,{}),Object(pe.jsx)(y.a.Text,{style:{color:"inherit",fontSize:13},children:R(t.gain_amount)})]})},align:"right",sorter:function(e,t){return e.gain_percent-t.gain_percent}},{key:"marketValue",title:Object(pe.jsxs)(pe.Fragment,{children:["Market Value",Object(pe.jsx)("div",{style:{fontSize:12},children:"CAD"})]}),dataIndex:"market_value",render:function(n){return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(y.a.Text,{strong:!0,children:e.isPrivateMode?"-":R(n)}),Object(pe.jsxs)("div",{style:{fontSize:13},children:[n?R(n/t*100,1):0,"%"]})]})},align:"right",sorter:function(e,t){return e.market_value-t.market_value}}]})})})}var ut=a.a.memo(st),ct=n(162),dt=n.n(ct),pt=n(163),ht=n.n(pt),ft=n(74);function bt(){return Object(pe.jsx)("span",{style:{fontSize:16},children:" \u2022 "})}function mt(e){var t=e.news;return Object(pe.jsxs)(M.a,{pb:2,children:[Object(pe.jsxs)(M.b,{alignItems:"center",children:[Object(pe.jsx)("div",{style:{fontSize:15,fontWeight:500,paddingBottom:4,paddingRight:4},children:Object(pe.jsx)(y.a.Link,{href:t.url,target:"_blank",rel:"noopener noreferrer",children:t.title})}),"positive"===t.sentiment?Object(pe.jsx)(ht.a,{style:{color:"green",fontSize:25}}):"neutral"!==t.sentiment?Object(pe.jsx)(dt.a,{style:{color:"red",fontSize:25}}):void 0]}),Object(pe.jsxs)("div",{style:{fontSize:13,color:"#8c8c8c"},children:[t.source,Object(pe.jsx)(bt,{}),D()(t.timestamp).format("MMM DD, YYYY hh:mm A")," EDT",Object(pe.jsx)(bt,{}),t.name," ",Object(pe.jsx)(bt,{}),t.symbol]}),Object(pe.jsx)("hr",{})]},t.title)}function yt(e){var t=e.positions,n=Object(l.useState)([]),a=Object(u.a)(n,2),i=a[0],o=a[1],r=Object(l.useState)(!1),s=Object(u.a)(r,2),c=s[0],d=s[1],p=Object(l.useState)([]),h=Object(u.a)(p,2),f=h[0],b=h[1],m=Object(l.useState)("All"),y=Object(u.a)(m,2),g=y[0],v=y[1],j=Object(l.useState)("all"),x=Object(u.a)(j,2),A=x[0],k=x[1];Object(l.useEffect)((function(){var e=t.filter((function(e){var t=e.security.symbol||e.security.name;return!(t.includes("-")||t.includes(".")||"crypto"===e.security.type)})).map((function(e){return N(e.security)})).join(",");if(e.length){var n=G("https://portfolio.nasdaq.com/api/portfolio/getPortfolioNews/?tickers=".concat(e));d(!0),fetch(n,{cache:"force-cache",method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){if(e){var t=new Set;o(e.map((function(e){var n=q(e.ticker);return t.add(n),{timestamp:D()(e.articleTimestamp||e.addedOn),name:e.companyName,symbol:n,sentiment:e.sentiment,title:e.title,url:e.url,source:e.siteName}}))),b(Array.from(t).sort((function(e,t){return e.localeCompare(t)})))}})).catch((function(e){return console.info("Failed to load news articles.",e)})).finally((function(){return d(!1)}))}}),[t]);var w=Object(l.useRef)(),C=Object(l.useRef)(),P=i.filter((function(e){return("all"===A||e.sentiment===A)&&("All"===g||e.symbol===g)}));return Object(pe.jsxs)(M.b,{flexDirection:"column",mb:3,alignItems:"center",children:[Object(pe.jsx)(M.b,{width:1,justifyContent:"center",mb:3,children:Object(pe.jsxs)(Ke.a.Group,{size:"large",defaultValue:A,onChange:function(e){k(e.target.value),E("news-sentiment-toggle",{sentiment:e.target.value})},buttonStyle:"solid",children:[Object(pe.jsx)(Ke.a.Button,{value:"all",children:"All"},"all"),Object(pe.jsxs)(Ke.a.Button,{value:"positive",children:[Object(pe.jsx)(ht.a,{style:{color:"green"}})," Bullish"]},"positive"),Object(pe.jsxs)(Ke.a.Button,{value:"negative",children:[Object(pe.jsx)(dt.a,{style:{color:"red"}})," Bearish"]},"negative")]})}),i.length?Object(pe.jsxs)(M.b,{width:1,children:[Object(pe.jsx)(M.b,{flexDirection:"column",alignItems:"flex-end",px:2,width:1/4,children:Object(pe.jsx)(M.a,{width:1,ref:w,children:Object(pe.jsx)(Ke.a.Group,{style:{width:"100%"},onChange:function(e){v(e.target.value),window.scroll({top:0,left:0,behavior:"smooth"}),(null===C||void 0===C?void 0:C.current)&&C.current.scrollTo({top:0,left:0,behavior:"smooth"})},value:g,buttonStyle:"solid",optionType:"button",children:["All"].concat(Object(Ue.a)(f)).map((function(e){return Object(pe.jsx)(Ke.a.Button,{style:{width:"100%",display:"flex",height:"50px",justifyContent:"center",alignItems:"center",lineHeight:"30px"},value:e,children:e})}))})})}),P.length?Object(pe.jsx)(M.a,{ref:C,width:3/4,px:2,height:(null===w||void 0===w?void 0:w.current)&&w.current.clientHeight,style:{overflow:"scroll"},children:P.map((function(e,t){return Object(pe.jsx)(mt,{news:e},"".concat(g,"-").concat(t))}))}):Object(pe.jsx)(M.b,{justifyContent:"center",width:3/4,py:3,children:Object(pe.jsx)(ft.a,{description:"No News Articles Found!"})})]}):c?Object(pe.jsx)(O.a,{size:"large"}):Object(pe.jsx)(ft.a,{description:"No News Articles Found!"})]})}var gt=a.a.memo(yt),vt=n(121),jt=n.n(vt),xt=n(120),Ot=n.n(xt),At=n(285),kt=n.n(At),wt=n(165),Ct=n.n(wt);function Pt(e){return Object(pe.jsx)(M.a,{p:1,children:Object(pe.jsx)(Ct.a,Object(T.a)({},e))})}function Dt(e){var t=e.portfolios,n=e.privateMode,l=e.positions,a=t[t.length-1],i=l.reduce((function(e,t){return e+t.market_value}),0),o=l.reduce((function(e,t){return e+t.book_value}),0),r=0===l.length,s=i-o,u=s?s/o*100:0;return Object(pe.jsx)(kt.a,{bodyStyle:{backgroundColor:"#f9f0ff"},style:{borderRadius:6,borderColor:"#efdbff"},children:Object(pe.jsxs)(M.b,{width:1,justifyContent:"space-between",flexWrap:"wrap",children:[Object(pe.jsx)(Pt,{title:"Portfolio Value",value:n?"--":a.value,precision:2,prefix:"$"}),Object(pe.jsx)(Pt,{title:"Deposits",value:n?"--":a.deposits,precision:2,prefix:"$"}),Object(pe.jsx)(Pt,{title:"Overall P&L %",valueStyle:{color:a.value>=a.deposits?"green":"red"},value:(a.value-a.deposits)/a.deposits*100,precision:2,suffix:"%",prefix:a.value>=a.deposits?Object(pe.jsx)(Ot.a,{}):Object(pe.jsx)(jt.a,{})}),Object(pe.jsx)(Pt,{title:"Overall P&L Value",valueStyle:{color:a.value>=a.deposits?"green":"red"},value:n?"--":a.value-a.deposits,precision:n?void 0:2,prefix:"$"}),Object(pe.jsx)(Pt,{title:"Unrealized P&L Value",valueStyle:{color:r?"grey":s>=0?"green":"red"},value:n?"--":r?"N/A":s,precision:n?void 0:2,prefix:r?void 0:"$"}),Object(pe.jsx)(Pt,{title:"Unrealized P&L %",valueStyle:{color:r?"grey":u>=0?"green":"red"},value:n?"--":r?"N/A":u,precision:n?void 0:2,suffix:r?void 0:"%",prefix:r?void 0:u>=0?Object(pe.jsx)(Ot.a,{}):Object(pe.jsx)(jt.a,{})})]})})}var Mt=a.a.memo(Dt),_t=function(e){var t=e.href,n=e.title;return Object(pe.jsx)(M.a,{width:275,children:Object(pe.jsx)(y.a.Link,{href:t,target:"_blank",rel:"noopener noreferrer",onClick:function(){return E("portfolio-visualizer-link",{title:n})},children:n})})};function St(e){var t=e.positions;return Object(pe.jsx)(Me,{title:"Portoflio Visualizer Tools",children:Object(pe.jsxs)(M.b,{width:1,children:[Object(pe.jsx)(_t,{href:function(){var e,n=t.reduce((function(e,t){return e+t.market_value}),0),l=100,a=(e=t.reduce((function(e,a,i){var o=Number((a.market_value/n*100).toFixed(1));return l-=o,l=Number(l.toFixed(1)),i+1===t.length&&(o+=l),e["symbol".concat(i+1)]=B(a.security),e["allocation".concat(i+1,"_1")]=o,e}),{}),Object.keys(e).map((function(t){return t+"="+e[t]})).join("&"));return"https://www.portfoliovisualizer.com/backtest-portfolio?s=y&timePeriod=4&initialAmount=10000&annualOperation=0&annualAdjustment=0&inflationAdjusted=true&annualPercentage=0.0&frequency=4&rebalanceType=1&showYield=false&reinvestDividends=true&".concat(a,"#analysisResults")}(),title:"Backtest Portfolio Asset Allocation"}),Object(pe.jsx)(_t,{href:function(){var e=t.filter((function(e){var t=e.security.symbol||e.security.name;return!(t.includes("-")||t.includes("."))})).sort((function(e,t){return"usd"===e.security.currency&&"usd"===t.security.currency||t.market_value>e.market_value?1:-1})).slice(0,20).map((function(e){return B(e.security)})).sort((function(e,t){return e.localeCompare(t)})).join(",");return"".concat("https://www.portfoliovisualizer.com/factor-analysis?s=y&regressionType=1&sharedTimePeriod=true&factorDataSet=0&marketArea=0&factorModel=3&useHMLDevFactor=false&includeQualityFactor=false&includeLowBetaFactor=false&fixedIncomeFactorModel=0&__checkbox_ffmkt=true&__checkbox_ffsmb=true&__checkbox_ffsmb5=true&__checkbox_ffhml=true&__checkbox_ffmom=true&__checkbox_ffrmw=true&__checkbox_ffcma=true&__checkbox_ffstrev=true&__checkbox_ffltrev=true&__checkbox_aqrmkt=true&__checkbox_aqrsmb=true&__checkbox_aqrhml=true&__checkbox_aqrhmldev=true&__checkbox_aqrmom=true&__checkbox_aqrqmj=true&__checkbox_aqrbab=true&__checkbox_aamkt=true&__checkbox_aasmb=true&__checkbox_aahml=true&__checkbox_aamom=true&__checkbox_aaqmj=true&__checkbox_qmkt=true&__checkbox_qme=true&__checkbox_qia=true&__checkbox_qroe=true&__checkbox_qeg=true&__checkbox_trm=true&__checkbox_cdt=true&timePeriod=2&rollPeriod=36&marketAssetType=1&robustRegression=false&symbols=").concat(e)}(),title:"Factor Regression (US Stocks)"})]})})}var Et=a.a.memo(St);function Tt(e){function t(){var t=e.portfolios.map((function(t){return{x:D()(t.date).valueOf(),y:(t.value-t.deposits)/t.deposits*100,pnlValue:e.isPrivateMode?"-":V(t.value-t.deposits,2).toLocaleString()}}));return[{id:"dataseries",name:"P&L %",data:t,tooltip:{valueDecimals:2},type:"spline"},{type:"flags",name:"Max Gain/Loss",data:[Object(T.a)(Object(T.a)({},U(t,"y")),{},{title:"L",text:"Max Loss"}),Object(T.a)(Object(T.a)({},H(t,"y")),{},{title:"G",text:"Max Gain"})].sort((function(e,t){return e.x-t.x})),onSeries:"dataseries",shape:"squarepin",width:16}]}return Object(pe.jsx)(Me,{title:"P&L Ratio Timeline",children:Object(pe.jsx)(Ce,{constructorType:"stockChart",options:{title:{text:"Profit/Loss (%)"},subtitle:{text:"Your P&L ratio.",style:{color:"#1F2A33"}},rangeSelector:{selected:1,enabled:!1,inputEnabled:!1},navigator:{enabled:!0},scrollbar:{enabled:!1},plotOptions:{spline:{zones:[{value:-1e-8,color:"#FF897C"},{color:"#84C341"}]}},yAxis:[{crosshair:{dashStyle:"Dash"},labels:{format:"{value}%"},opposite:!1}],tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}% (${point.pnlValue})</b><br/>',valueDecimals:2,split:!0},responsive:{rules:[{condition:{maxWidth:500},chartOptions:{chart:{height:300},yAxis:[{labels:{enabled:!1}},{labels:{enabled:!1}}],subtitle:{text:void 0},navigator:{enabled:!1}}}]},series:t()}})})}var Ft=a.a.memo(Tt);function Yt(e){return Object(pe.jsx)(Me,{title:"P&L Value Timeline",children:Object(pe.jsx)(Ce,{constructorType:"stockChart",options:{title:{text:"Profit/Loss ($)"},subtitle:{text:"Your P&L in dollars.",style:{color:"#1F2A33"}},rangeSelector:{selected:1,enabled:!1,inputEnabled:!1},navigator:{enabled:!0},scrollbar:{enabled:!1},plotOptions:{column:{zones:[{value:-1e-8,color:"#FF897C"},{color:"#84C341"}]}},yAxis:[{crosshair:{dashStyle:"Dash"},labels:{enabled:!e.isPrivateMode},opposite:!1}],tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.displayValue} ({point.pnlRatio:.2f}%)</b><br/>',valueDecimals:2,split:!0},responsive:{rules:[{condition:{maxWidth:500},chartOptions:{chart:{height:300},yAxis:[{labels:{enabled:!1}},{labels:{enabled:!1}}],subtitle:{text:void 0},navigator:{enabled:!1}}}]},series:[{name:"P&L",data:e.portfolios.map((function(t){return{x:D()(t.date).valueOf(),y:t.value-t.deposits,pnlRatio:(t.value-t.deposits)/t.deposits*100,displayValue:e.isPrivateMode?"-":Number((t.value-t.deposits).toFixed(2)).toLocaleString()}})),type:"column"}]}})})}var Lt=a.a.memo(Yt),zt=n(286),It=n.n(zt),Qt=n(107),Rt=n(142),Bt=n.n(Rt),Nt=(n(576),"MMM DD, YYYY"),qt=a.a.memo((function(e){var t=e.closedPositions,n=e.isPrivateMode;return Object(pe.jsx)("div",{className:"zero-padding",children:Object(pe.jsx)(Me,{title:"Realized P&L History",closed:!0,children:Object(pe.jsx)(Be.a,{pagination:{pageSize:5},dataSource:t,summary:function(e){var t=e.reduce((function(e,t){return e+t.pnl}),0);return Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsxs)(Be.a.Summary.Row,{children:[Object(pe.jsx)(Be.a.Summary.Cell,{colSpan:5,align:"right",index:0,children:Object(pe.jsx)(y.a.Text,{strong:!0,children:"Total"})}),Object(pe.jsx)(Be.a.Summary.Cell,{index:1,colSpan:3,children:Object(pe.jsxs)(y.a.Text,{strong:!0,style:{color:t>0?"green":"red"},children:[R(t)," CAD"]})})]})})},columns:[{key:"date",title:"Date",dataIndex:"date",render:function(e){return e.format("YYYY-MM-DD")},sorter:function(e,t){return e.date.valueOf()-t.date.valueOf()},width:150},{key:"account",title:"Account",dataIndex:"account",width:150,render:function(e){return e?e.name:"N/A"},filters:Array.from(new Set(t.map((function(e){return e.account?e.account.name:"N/A"})))).map((function(e){return{text:e,value:e}})).sort((function(e,t){return e.value.localeCompare(t.value)})),onFilter:function(e,t){var n;return 0===((null===(n=t.account)||void 0===n?void 0:n.name)||"N/A").indexOf(e)}},{key:"symbol",title:"Symbol",dataIndex:"symbol",render:function(e,t){return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(y.a.Link,{rel:"noreferrer noopener",href:"https://finance.yahoo.com/quote/".concat(e),target:"_blank",children:e}),Object(pe.jsx)("div",{style:{fontSize:10},children:"usd"===t.currency?"USD":"CAD"})]})},width:125,filters:Array.from(new Set(t.map((function(e){return e.symbol})))).map((function(e){return{text:e,value:e}})).sort((function(e,t){return e.value.localeCompare(t.value)})),onFilter:function(e,t){return 0===t.symbol.indexOf(e)},sorter:function(e,t){return e.symbol.localeCompare(t.symbol)}},{key:"shares",title:"Shares",dataIndex:"shares",align:"right",render:function(e){return n?"-":e.toLocaleString("en-US")},width:75},{key:"price",title:Object(pe.jsxs)(pe.Fragment,{children:["Buy Price / Sell Price"," ",Object(pe.jsx)(Qt.a,{title:"This is the Adjusted Cost Base (ACB) which includes the buy/sell transaction fees.",children:Object(pe.jsx)(It.a,{twoToneColor:"#bfbfbf"})})]}),align:"right",render:function(e,t){return Object(pe.jsxs)(pe.Fragment,{children:[R(t.buyPrice)," / ",R(t.sellPrice)]})}},{key:"gain",title:Object(pe.jsxs)(pe.Fragment,{children:["P&L $%",Object(pe.jsx)("div",{style:{fontSize:12},children:"(CAD)"})]}),render:function(e,t){return Object(pe.jsxs)(M.a,{style:{color:t.pnl<0?"red":"green"},children:[Object(pe.jsx)(y.a.Text,{strong:!0,style:{color:"inherit",fontSize:14},children:n?"-":R(t.pnl)}),Object(pe.jsx)(M.a,{}),Object(pe.jsxs)(y.a.Text,{style:{color:"inherit",fontSize:13},children:[R(t.pnlRatio),"%"]})]})},align:"right",sorter:function(e,t){return e.pnlRatio-t.pnlRatio}},{key:"openDate",title:"Open Date",render:function(e,t){return(t.buyDate.isAfter(t.sellDate)?t.sellDate:t.buyDate).format("YYYY-MM-DD")}},{key:"holding-period",title:"Holding Period",render:function(e,t){return t.buyDate.diff(t.sellDate)?D.a.duration(t.buyDate.diff(t.sellDate)).humanize():"Same Day"}}]})})})})),Ut=a.a.memo((function(e){var t=e.accountById,n=e.transactions,l=e.isPrivateMode;return Object(pe.jsx)("div",{className:"zero-padding",children:Object(pe.jsx)(Me,{title:"Expenses History",closed:!0,children:Object(pe.jsx)(Be.a,{pagination:{pageSize:5},dataSource:n.reverse(),columns:[{key:"date",title:"Date",dataIndex:"date",render:function(e){return e.format("YYYY-MM-DD")},sorter:function(e,t){return e.date.valueOf()-t.date.valueOf()},width:150},{key:"account",title:"Account",dataIndex:"account",render:function(e){return t[e]?t[e].name:"N/A"},width:250},{key:"interest",title:"Interest (CAD)",dataIndex:"amount",render:function(e){return l?"--":Object(pe.jsxs)(y.a.Text,{strong:!0,children:["$",R(e)]})},align:"right",sorter:function(e,t){return e.amount-t.amount},width:200},{key:"description",title:"Description",dataIndex:"description"}]})})})})),Ht=a.a.memo((function(e){var t=e.accountById,n=e.transactions,l=e.isPrivateMode;return Object(pe.jsx)("div",{className:"zero-padding",children:Object(pe.jsx)(Me,{title:"Income History",closed:!0,children:Object(pe.jsx)(Be.a,{pagination:{pageSize:5},dataSource:n.reverse(),columns:[{key:"date",title:"Date",dataIndex:"date",render:function(e){return e.format("YYYY-MM-DD")},sorter:function(e,t){return e.date.valueOf()-t.date.valueOf()},width:150},{key:"account",title:"Account",dataIndex:"account",render:function(e){return t[e]?t[e].name:"N/A"},width:250},{key:"symbol",title:"Symbol",dataIndex:"symbol",render:function(e,t){return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(y.a.Link,{rel:"noreferrer noopener",href:"https://finance.yahoo.com/quote/".concat(e),target:"_blank",children:e}),Object(pe.jsx)("div",{style:{fontSize:10},children:"usd"===t.currency?"USD":"CAD"})]})},width:125,filters:Array.from(new Set(n.map((function(e){return e.symbol})))).map((function(e){return{text:e,value:e}})).sort((function(e,t){return e.value.localeCompare(t.value)})),onFilter:function(e,t){return 0===t.symbol.indexOf(e)},sorter:function(e,t){return e.symbol.localeCompare(t.symbol)}},{key:"type",title:"Type",dataIndex:"type",render:function(e){return Object(pe.jsx)(y.a.Text,{strong:!0,children:C.a.startCase(e||"-")})}},{key:"income",title:"Income (CAD)",dataIndex:"amount",render:function(e){return l?"--":Object(pe.jsxs)(y.a.Text,{strong:!0,children:["$",R(e)]})},align:"right",sorter:function(e,t){return e.amount-t.amount}},{key:"description",title:"Description",dataIndex:"description"}]})})})}));function Vt(e){var t=e.currencyCache,n=e.accountTransactions,a=e.transactions,i=e.accounts,o=e.isPrivateMode,r=e.fromDate,s=Object(l.useState)("month"),c=Object(u.a)(s,2),d=c[0],p=c[1],h=Object(l.useMemo)((function(){var e=n.filter((function(e){return["interest","fee"].includes(e.type)&&e.date.isSameOrAfter(r)}));return{expenseTransactions:e,totalExpense:e.reduce((function(e,t){return e+t.amount}),0)}}),[a,r]),f=h.expenseTransactions,b=h.totalExpense,m=Object(l.useMemo)((function(){var e=a.filter((function(e){return["income","dividend","distribution"].includes(e.type)&&e.date.isSameOrAfter(r)}));return{incomeTransactions:e,totalIncome:e.reduce((function(e,t){return e+t.amount}),0)}}),[a,r]),g=m.incomeTransactions,v=m.totalIncome,x=Object(l.useState)("type"),O=Object(u.a)(x,2),A=O[0],k=O[1],w=Object(l.useMemo)((function(){return i.reduce((function(e,t){return e[t.id]=t,e}),{})}),[i]);function C(e,n){var l=Math.min(Math.abs(e.shares),Math.abs(n.shares)),a="buy"===n.type?n:e,i="sell"===n.type?n:e,o=l*a.price,r=l*i.price-o,s=r/o*100,u={date:n.date,account:w[n.account],symbol:n.symbol,currency:n.currency,shares:l,buyDate:a.date,buyPrice:a.price,sellDate:i.date,sellPrice:i.price,pnl:"usd"===n.currency&&"crypto"!==n.securityType?Q(n.date,r,t):r,pnlRatio:s},c=e.shares+n.shares;return e.shares=c,c>0?(e.price=a.price,e.date=a.date):c<0?(e.price=i.price,e.date=i.date):e.price=0,u}function P(e,t){var n=e.shares+t.shares;0===e.shares&&(e.date=t.date),e.price=(e.price*e.shares+t.price*t.shares)/n,e.shares=n}function _(){var e=[],t={};a.forEach((function(n){var l="".concat(n.account,"-").concat(n.symbol),a=t[l];a||(a={shares:0,price:0,date:n.date},t[l]=a),"buy"===n.type?a.shares<0?e.push(C(a,n)):P(a,n):"sell"===n.type?a.shares>0?e.push(C(a,n)):P(a,n):"split"===n.type?function(e,t){if(!(t.shares>0)){var n=t.splitRatio||1,l=Math.floor(e.shares/n);e.shares=l,e.price=e.price*n}}(a,n):"reinvest"===n.type&&P(a,Object(T.a)(Object(T.a)({},n),{},{price:0}))}));var n=D()(r);return e.filter((function(e){return e.date.isSameOrAfter(n)})).reverse()}var S=function(e){return{series:e.series,legend:{enabled:!0},tooltip:{outside:!0,useHTML:!0,backgroundColor:"#FFF",style:{color:"#1F2A33"}},title:{text:void 0},xAxis:{type:"category",labels:{style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}},yAxis:{labels:{enabled:!o},title:{text:"$ (CAD)"}}}},Y=function(e){var t=D()(e);switch(d){case"month":return t.format("MMM YY");case"week":return"".concat(t.format("MMM DD")," - ").concat(D()(e).endOf(d).format("MMM DD"),", ").concat(t.format("YY"));case"year":return t.format("YYYY");case"day":return t.format("MMM DD, YYYY")}},L=function(e){function t(e,t){var n=Object.keys(t).map((function(e){return{date:e,label:Y(e),pnl:t[e]}})).filter((function(e){return e.pnl})).sort((function(e,t){return D()(e.date).valueOf()-D()(t.date).valueOf()})).map((function(e){return{date:e.date,label:e.label,pnl:e.pnl,startDate:D()(e.date).startOf(d).format(Nt),endDate:D()(e.date).endOf(d).format(Nt)}})),l="pnl"===e?"Realized P&L":"expense"===e?"Expenses (Interest, Fee)":"income"===e?"Income (Dividends)":"".concat(q.includes("pnl")?"P&L  ".concat(q.includes("income")?"+":""," "):"").concat(q.includes("income")?"Income":"").concat(q.includes("expense")?" - Expenses":"");return{name:l,type:"column",color:"pnl"===e?"#b37feb":"expense"===e?"#ff7875":"income"===e?"#95de64":"#5cdbd3",data:n.map((function(e){return{key:e.label,name:e.label,label:e.label,y:e.pnl,pnl:o?"-":R(e.pnl),pnlHuman:o?"-":V(e.pnl,2),startDate:e.startDate,endDate:e.endDate}})),tooltip:{headerFormat:'<span style="font-size: 13px; font-weight: 700;">'.concat(l,"</span>"),pointFormat:'<hr /><span style="font-size: 12px;font-weight: 500;">{point.startDate} - {point.endDate}</span>\n          <br />\n          <b style="font-size: 13px; font-weight: 700">{point.pnl} CAD</b><br />'},dataLabels:{enabled:!0,format:"{point.pnlHuman}"},showInLegend:!0}}var n={},l={},a={},i={};q.includes("pnl")&&e.forEach((function(e){var t=e.date.clone().startOf(d).format(F);l[t]=l[t]?l[t]+e.pnl:e.pnl})),q.includes("expense")&&f.forEach((function(e){var t=e.date.clone().startOf(d).format(F);a[t]=a[t]?a[t]+e.amount:e.amount})),q.includes("income")&&g.forEach((function(e){var t=e.date.clone().startOf(d).format(F);i[t]=i[t]?i[t]+e.amount:e.amount})),new Set(Object.keys(a).concat(Object.keys(l)).concat(Object.keys(i))).forEach((function(e){n[e]=(l[e]||0)-(a[e]||0)+(i[e]||0)}));var r=[];return q.forEach((function(e){var n="pnl"===e?l:"income"===e?i:a;Object.keys(n).length&&r.push(t(e,n))})),1===r.length?r:[t("all",n)].concat(r)},z=function(e,t,n){var l={};return q.includes("pnl")&&e.forEach((function(e){var t=Xe(n,e.account),a=l[t];a||(a={name:t,pnl:0},l[t]=a),a.pnl+=e.pnl})),q.includes("expense")&&f.forEach((function(e){var t=Xe(n,w[e.account]),a=l[t];a||(a={name:t,pnl:0},l[t]=a),a.pnl-=e.amount})),q.includes("income")&&g.forEach((function(e){var t=Xe(n,w[e.account]),a=l[t];a||(a={name:t,pnl:0},l[t]=a),a.pnl+=e.amount})),[{type:"pie",id:"accounts",name:"Accounts",dataLabels:{enabled:!0,format:'<b style="font-size: 12px;">{point.name}: <span style="color: {point.pnlColor};">{point.percentage:.1f}%</span></b>',style:{color:"black"}},data:Object.values(l).filter((function(e){return e.pnl})).sort((function(e,t){return t.pnl-e.pnl})).map((function(e){return{name:e.name,y:Math.abs(e.pnl),negative:e.pnl<0,displayValue:o?"-":e.pnl?R(e.pnl):e.pnl,totalValue:o?"-":R(t),pnlColor:e.pnl<0?"red":"green"}})),tooltip:{headerFormat:"<b>{point.key}<br />{point.percentage:.1f}%</b><hr />",pointFormatter:function(){var e=this.options;return'<table>\n          <tr><td>P/L</td><td class="position-tooltip-value">'.concat(e.displayValue,' CAD</td></tr>\n          <tr><td>Total P/L</td><td class="position-tooltip-value">').concat(e.totalValue," CAD</td></tr>\n        </table>")}}}]},I=Object(l.useMemo)((function(){return _()}),[a,i,r]);var B=Object(l.useState)((function(){return[I.length?"pnl":g.length?"income":"expense"]})),N=Object(u.a)(B,2),q=N[0],U=N[1],H=Object(l.useMemo)((function(){var e=I.reduce((function(e,t){return e+t.pnl}),0);return{realizedPnL:e,closedPnL:(q.includes("pnl")?e:0)-(q.includes("expense")?b:0)+(q.includes("income")?v:0)}}),[I,q,b,v]),G=H.closedPnL,J=H.realizedPnL,W=Object(l.useMemo)((function(){return S({series:L(I)})}),[I,d,q]),K=Object(l.useMemo)((function(){return S({series:z(I,G,A)})}),[I,G,A,q]),Z=Object(l.useMemo)((function(){var e=[];return e.push({label:Object(pe.jsxs)(pe.Fragment,{children:["Realized P&L"," ",Object(pe.jsxs)(y.a.Text,{type:J>0?"success":J<0?"danger":"secondary",strong:!0,children:[R(J)," CAD"]})]}),value:"pnl",disabled:!I.length}),e.push({label:Object(pe.jsxs)(pe.Fragment,{children:["Income (Dividends)"," ",Object(pe.jsxs)(y.a.Text,{type:v?"success":"secondary",strong:v>0,children:[R(v)," CAD"]})]}),value:"income",disabled:!g.length}),e.push({label:Object(pe.jsxs)(pe.Fragment,{children:["Expenses (Interest, Fee)"," ",Object(pe.jsxs)(y.a.Text,{type:b?"danger":"secondary",strong:b>0,children:[R(b)," CAD"]})]}),value:"expense",disabled:!f.length}),e}),[I,g,f]);return I.length>0||g.length>0||f.length>0?Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(M.b,{mt:2,mb:3,justifyContent:"center",children:Object(pe.jsx)(Ct.a,{value:o?"--":G,precision:2,suffix:"CAD",valueStyle:{color:G>=0?"green":"red"},prefix:G>=0?Object(pe.jsx)(Ot.a,{}):Object(pe.jsx)(jt.a,{})})}),Object(pe.jsx)(M.b,{mb:3,mt:2,width:1,justifyContent:"center",alignContent:"center",justifyItems:"center",alignItems:"center",children:Object(pe.jsx)(Bt.a.Group,{options:Z,value:q,onChange:function(e){U(e),E("realized-pnl-types",{types:e})}})}),Object(pe.jsx)(we,{options:W},d),Object(pe.jsx)(M.b,{width:1,justifyContent:"center",py:2,mb:4,children:Object(pe.jsx)(Ke.a.Group,{defaultValue:d,size:"large",buttonStyle:"solid",onChange:function(e){E("realized-pnl-chart",{timeline:e.target.value}),p(e.target.value)},options:[{label:"Day",value:"day"},{label:"Week",value:"week"},{label:"Month",value:"month"},{label:"Year",value:"year"}],optionType:"button"})}),Object(pe.jsxs)(Me,{title:"Realized P&L Composition",children:[Object(pe.jsx)(we,{options:K},d)," ",Object(pe.jsx)(Ze,{changeGroup:k,group:A,tracker:"realized-pnl-group"})]}),I.length>0&&Object(pe.jsx)(qt,{closedPositions:I,isPrivateMode:o}),g.length>0&&Object(pe.jsx)(Ht,{transactions:g,isPrivateMode:o,accountById:w}),f.length>0&&Object(pe.jsx)(Ut,{transactions:f,isPrivateMode:o,accountById:w})]}):Object(pe.jsx)(j.a,{description:"No realized gains/loss/income/expenses for the selected time period."})}var Gt="P/L (%): <b>{point.pnlRatio:.2f}%</b> <br />P/L ($): <b>{point.pnlValue} {point.currency}</b><br /><br />Book: {point.shares}@{point.price}<br /><br />Stock Price: {point.stockPrice} {point.currency}<br />";function Jt(e){var t,n=e.isPrivateMode,a=e.symbol,i=e.position,o=e.addon,r=e.showValueChart,s=e.currencyCache,c=Object(l.useState)(!1),d=Object(u.a)(c,2),p=d[0],h=d[1],f=Object(l.useState)([]),b=Object(u.a)(f,2),m=b[0],y=b[1],g=Object(l.useRef)(!1),v="crypto"===(null===(t=i.security)||void 0===t?void 0:t.type);function x(e){if(g.current){var t,n=I(e.to),l=[];e.data.filter((function(e){return e})).reverse().forEach((function(e){t||(t=e),100*Math.abs((e-t)/e)>100&&(e=t),(n.isoWeekday()<=5||v)&&l.push({timestamp:n.clone(),closePrice:v?Q(n,e,s):e}),n.subtract(1,"days"),t=e}));var a=l.sort((function(e,t){return e.timestamp.valueOf()-t.timestamp.valueOf()}));y(a)}else y([])}function A(){var e={all:[]};i.transactions.filter((function(e){return["buy","sell","split","reinvest"].includes(e.type)})).forEach((function(t){if("split"!==t.type||t.splitRatio){var n=v?t.date.format("YYYY-MM-DD"):function(e){var t=D()(e),n=t.day(),l=6===n?2:0===n?1:0;return(l?t.add(l,"days"):t).format("YYYY-MM-DD")}(t.date.clone()),l=e[t.account];l||(l=[],e[t.account]=l);var a=["buy","reinvest"].includes(t.type),i="split"===t.type,o="reinvest"===t.type?0:t.price,r=t.splitRatio||1,s=l.pop()||{shares:0,price:0,date:n},u=Number((i?Math.floor(s.shares/r):s.shares+t.shares).toFixed(10)),c={price:a&&u?(s.price*s.shares+o*t.shares)/u:i?s.price*r:u?s.price:0,shares:u,date:n};c.date!==s.date&&l.push(s),l.push(c);var d=e.all.pop()||{shares:0,price:0,date:n},p=Number((i?d.shares-s.shares+c.shares:d.shares+t.shares).toFixed(10)),h={price:p?i?(d.price*d.shares-s.shares*s.price+c.shares*c.price)/p:(d.price*d.shares+(a?o:s.price)*t.shares)/p:0,shares:p,date:n};h.date!==d.date&&e.all.push(d),e.all.push(h)}}));var t,l=e.all.reduce((function(e,t){return e[t.date]={shares:t.shares,price:t.price},e}),{}),o=[];return m.forEach((function(e){var a=l[e.timestamp.format("YYYY-MM-DD")];if(t=a||t)if(0===t.shares)o=[];else{var s=t.price*t.shares,u=e.closePrice*t.shares,c=(e.closePrice-t.price)/t.price*100;o.push({x:e.timestamp.valueOf(),y:r?u-s:c,d:e.timestamp.format("YYYY-MM-DD"),pnlRatio:c,pnlValue:n?"-":R(u-s),currency:i.security.currency.toUpperCase(),stockPrice:R(e.closePrice),price:R(t.price),shares:t.shares.toLocaleString("en-US")})}})),[{id:"dataseries",name:a,data:o,type:"spline",tooltip:{pointFormat:Gt,split:!0}},{type:"flags",name:"Max Gain/Loss",tooltip:{pointFormat:"<b>{point.text}</b><br />".concat(Gt)},data:[Object(T.a)(Object(T.a)({},U(o,"y")),{},{title:"L",text:"Max Loss"}),Object(T.a)(Object(T.a)({},H(o,"y")),{},{title:"G",text:"Max Gain"})].sort((function(e,t){return e.x-t.x})),onSeries:"dataseries",shape:"squarepin",width:16}].concat(Object(Ue.a)(["buy","sell","income","dividend","distribution","tax","fee"].map((function(e){return function(e){var t=["buy","sell"].includes(e);return{name:C.a.startCase(e),shape:"squarepin",type:"flags",width:25,tooltip:{pointFormat:"<b>{point.text}</b>"},data:i.transactions.filter((function(t){return t.type===e})).sort((function(e,t){return e.date.valueOf()-t.date.valueOf()})).reduce((function(e,t){var n=e.pop();return n&&n.date.valueOf()===t.date.valueOf()?e.push(Object(T.a)(Object(T.a)({},n),{},{shares:t.shares&&n.shares?n.shares+t.shares:n.shares,amount:t.amount+n.amount,price:t.price&&n.price?(Number(t.price)+Number(n.price))/2:n.price})):(n&&e.push(n),e.push(t)),e}),[]).map((function(n){return{transaction:n,x:n.date.valueOf(),title:t?Math.round(n.shares):e.charAt(0).toUpperCase(),text:t?"".concat(C.a.startCase(e),": ").concat(n.shares,"@").concat(R(n.price)):"".concat(C.a.startCase(e),": $").concat(V(n.amount,2))}})),color:L[e],fillColor:L[e],style:{color:"white"}}}(e)}))))}Object(l.useEffect)((function(){return g.current=!0,function(){g.current=!1}}),[]),Object(l.useEffect)((function(){if(a&&g.current){h(!0),E("stock-pnl-timeline");var e=i.transactions&&i.transactions.length?i.transactions[0].date:D()();if(o)o.request({query:{},method:"GET",endpoint:"securities/".concat(i.security.id,"/history?from=").concat(e.format("YYYY-MM-DD"))}).then((function(e){return x(e)})).catch((function(e){console.log("Failed to load stock prices.",e),y([])})).finally((function(){return h(!1)}));else{var t="https://app.wealthica.com/api/securities/".concat(i.security.id,"/history?from=").concat(e.format("YYYY-MM-DD"));fetch(G(t),{cache:"force-cache",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return x(e)})).catch((function(e){console.log("Failed to load stock prices.",e),y([])})).finally((function(){return h(!1)}))}}}),[a,o,i]);var k=Object(l.useMemo)((function(){return function(e){var t=i.transactions.filter((function(e){return"dividend"===e.type})).reduce((function(e,t){return e+t.amount}),0);return{title:{text:"P/L (".concat(r?"$":"%",") Timeline for ").concat(a),style:{color:"#1F2A33",textDecoration:"underline",fontWeight:"bold"}},subtitle:{text:n?"":"Shares: ".concat(i.quantity,"@").concat(R(i.investments.reduce((function(e,t){return e+t.book_value}),0)/i.quantity),", Market Value: ").concat(V(i.market_value,2)," CAD, P/L: ").concat(R(100*i.gain_percent,2),"% / ").concat(V(i.gain_amount,2),"  CAD").concat(t?", Dividends: ".concat(V(t,2)," CAD"):""),style:{color:"#1F2A33",fontWeight:"bold"}},rangeSelector:{selected:1,enabled:!0,inputEnabled:!1},navigator:{enabled:!1},scrollbar:{enabled:!1},plotOptions:{spline:{gapSize:15,zones:[{value:-1e-8,color:"#FF897C"},{color:"#84C341"}]}},yAxis:[{crosshair:{dashStyle:"Dash"},labels:{formatter:function(){return r?V(this.value,2):"".concat(R(this.value,0),"%")}},title:{text:void 0},opposite:!1}],responsive:{rules:[{condition:{maxWidth:500},chartOptions:{chart:{height:300},subtitle:{text:void 0}}}]},series:e,legend:{enabled:!0}}}(A())}),[a,i,m,r]);return Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)("hr",{}),p?Object(pe.jsx)(M.b,{justifyContent:"center",height:300,alignItems:"center",children:Object(pe.jsx)(O.a,{size:"large"})}):m&&m.length?Object(pe.jsx)(Ce,{constructorType:"stockChart",options:k}):Object(pe.jsx)(j.a,{description:"Can't load stock price for ".concat(a)}),Object(pe.jsx)("hr",{})]})}var Wt=a.a.memo(Jt);function Kt(e){var t=Object(l.useState)(!1),n=Object(u.a)(t,2),a=n[0],i=n[1],o=Object(l.useState)(),r=Object(u.a)(o,2),s=r[0],c=r[1];function d(t){return[{name:t?"Top Gainers":"Top Losers",type:"column",events:{click:function(e){e.point.name&&s!==e.point.name&&setTimeout((function(){c(e.point.name)}),50)}},colorByPoint:!0,data:e.positions.filter((function(e){return e.gain_percent&&(t?e.gain_percent>0:e.gain_percent<=0)})).sort((function(e,t){return a?e.gain_amount-t.gain_amount:e.gain_percent-t.gain_percent})).map((function(t){return{name:B(t.security),y:a?t.gain_amount:100*t.gain_percent,gainRatio:100*t.gain_percent,gain:e.isPrivateMode?"-":R(t.gain_amount),gainDisplay:e.isPrivateMode?"-":V(t.gain_amount,1)}})),tooltip:{headerFormat:"",pointFormat:'<table>\n            <tr><th colspan="2" style="text-align:center">{point.name}</th></tr>\n            <tr>\n              <td>P&L %</td>\n              <td style="text-align: right;"><b>{point.gainRatio:.1f}%</b></td>\n            </tr>\n            <tr>\n              <td>P&L $</td>\n              <td style="text-align: right; padding-left: 16px;"><b>{point.gain} CAD</b></td>\n            </tr>\n          </table>'},dataLabels:{enabled:!0,format:a?"{point.gainDisplay}":"{point.y:.1f}%"},showInLegend:!1}]}function p(t){var n=t.title,l=t.yAxisTitle,i=t.subtitle;return{series:t.series,tooltip:{outside:!0,useHTML:!0,backgroundColor:"#FFF",style:{color:"#1F2A33"}},title:{text:n},subtitle:{text:i,style:{color:"#1F2A33"}},xAxis:{type:"category",labels:{rotation:-45,style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}},yAxis:{labels:{enabled:!!a||!e.isPrivateMode},title:{text:l}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %",style:{color:"black"}}}},responsive:{rules:[{condition:{maxWidth:500},chartOptions:{chart:{height:300},yAxis:{labels:{enabled:!1}},subtitle:{text:void 0},navigator:{enabled:!1}}}]}}}var h=Object(l.useMemo)((function(){return{gainers:p({title:"Top Gainers",subtitle:"(click on a stock to view the P/L timeline)",yAxisTitle:"Gain (".concat(a?"$":"%",")"),series:d(!0)}),losers:p({title:"Top Losers",subtitle:"(click on a stock to view the P/L timeline)",yAxisTitle:"Loss (".concat(a?"$":"%",")"),series:d(!1)})}}),[a,e.isPrivateMode,e.positions]),f=h.gainers,b=h.losers;return e.positions.length?Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsxs)(M.b,{mb:3,mt:2,width:1,justifyContent:"center",alignContent:"center",justifyItems:"center",alignItems:"center",children:[Object(pe.jsx)(Ge.a,{checked:a,onChange:function(e){i(e),E("gainers-show-by-pnl-value",{checked:e})}}),Object(pe.jsx)(M.a,{px:1}),Object(pe.jsx)(y.a.Text,{strong:!0,mark:a,style:{fontSize:17},children:"Show By P&L Value ($)"})]}),!!(f.series&&f.series[0]&&f.series[0].data.length)&&Object(pe.jsx)(Ce,{options:f}),function(){if(!s)return Object(pe.jsx)(pe.Fragment,{});var t=e.positions.filter((function(e){return B(e.security)===s}))[0];return t?Object(pe.jsx)(Wt,{isPrivateMode:e.isPrivateMode,symbol:s,position:t,addon:e.addon,showValueChart:a,currencyCache:e.currencyCache}):Object(pe.jsx)(pe.Fragment,{})}(),!!(b.series&&b.series[0]&&b.series[0].data.length)&&Object(pe.jsx)(Ce,{options:b})]}):Object(pe.jsx)(j.a,{description:"No Holdings"})}var Zt="MMM DD, YYYY";function Xt(e){var t=e.portfolios.reduce((function(e,t){return e[t.date]=t,e}),{}),n=function(e){return t[e]},a=function(){var l=e.portfolios[e.portfolios.length-1],a=D()().utc();if(a.format("YYYY-MM-DD")===l.date&&a.hour()<20&&e.portfolios.length>1&&(l=e.portfolios[e.portfolios.length-2]),D()(l.date).isoWeekday()>5){var i=J(l.date).format("YYYY-MM-DD");l=t[i]}var o=l.date,r=new Set,s=[];return[{id:"1D",label:"1 Day",date:J(o)},{id:"1W",label:"1 Week",date:D()(o).subtract(1,"weeks")},{id:"1M",label:"1 Month",date:D()(o).subtract(1,"months").add(1,"days")},{id:"3M",label:"3 Months",date:D()(o).subtract(3,"months").add(1,"days")},{id:"6M",label:"6 Months",date:D()(o).subtract(6,"months").add(1,"days")},{id:"1Y",label:"1 Year",date:D()(o).subtract(1,"years").add(1,"days")},{id:"2Y",label:"2 Years",date:D()(o).subtract(2,"years").add(1,"days")},{id:"3Y",label:"3 Years",date:D()(o).subtract(3,"years").add(1,"days")},{id:"5Y",label:"5 Years",date:D()(o).subtract(5,"years").add(1,"days")},{id:"MTD",label:"Month To Date",date:D()(o).startOf("month")},{id:"WTD",label:"Week To Date",date:D()(o).startOf("week")},{id:"YTD",label:"Year To Date",date:D()(o).startOf("year")}].map((function(e){var t=n(e.date.format("YYYY-MM-DD"));if(t){var a="".concat(t.date,"-").concat(l.date);r.has(a)||(s.push({id:e.id,label:e.label,date:e.date,startPortfolio:t,endPortfolio:l}),r.add(a))}return null})),[1,2,3,4].forEach((function(e){var t=D()(o).subtract(e,"years").year(),l=D()().year(t).month("Jan").startOf("month"),a=n(l.format("YYYY-MM-DD")),i=n(D()().year(t).month("Dec").endOf("month").format("YYYY-MM-DD"));if(a&&i){var u="".concat(a.date,"-").concat(i.date);r.has(u)||(s.push({id:"FY ".concat(t),label:"Jan - Dec ".concat(t),date:l,startPortfolio:a,endPortfolio:i}),r.add(u))}})),[{name:"PnL Change %",type:"column",data:s.filter((function(e){return e.endPortfolio.date!==e.startPortfolio.date})).sort((function(e,t){return e.date.valueOf()>t.date.valueOf()?1:-1})).map((function(e){var t=e.startPortfolio.value-e.startPortfolio.deposits,n=e.endPortfolio.value-e.endPortfolio.deposits,l=t/e.startPortfolio.deposits*100,a=n/e.endPortfolio.deposits*100,i=n-t,o=a-l;return{id:e.id,label:e.label,date:e.date.format(Zt),startDate:D()(e.startPortfolio.date).format(Zt),endDate:D()(e.endPortfolio.date).format(Zt),startPnl:t,startRatio:l,endPnl:n,endRatio:a,changeRatio:o,changeValue:i,color:o>=0?"green":"red"}})).map((function(t){return{key:t.id,name:t.id,label:t.label,y:t.changeRatio,startDate:t.startDate,startPnl:e.isPrivateMode?"-":V(t.startPnl,2),startRatio:t.startRatio,endDate:t.endDate,endPnl:e.isPrivateMode?"-":V(t.endPnl,2),endRatio:t.endRatio,changeValue:e.isPrivateMode?"-":"$".concat(V(t.changeValue,1))}})),point:{events:{mouseOver:function(e){E("mouse-over-point",{chart:"pnl-change-over-periods",name:e&&e.target?e.target.key:null})}}},tooltip:{headerFormat:"",pointFormat:'<b style="font-size: 13px;">{point.label} ({point.key})</b><br /><b style="color: {point.color};font-size: 14px;">{point.y:.1f}% ({point.changeValue})</b><br /><hr />\n            {point.startDate}: <b>{point.startRatio:.2f}%</b> (${point.startPnl})<br />\n            {point.endDate}: <b>{point.endRatio:.2f}%</b> (${point.endPnl})<br />'},dataLabels:{enabled:!0,format:"{point.y:.1f}% ({point.changeValue})"},showInLegend:!1}]},i=Object(l.useMemo)((function(){return{series:{series:a()}.series,tooltip:{outside:!0,useHTML:!0,backgroundColor:"#FFF",style:{color:"#1F2A33"}},title:{text:"P&L % Change Over Multiple Time Periods"},subtitle:{text:"This chart shows how your portfolio had performed in multiple time slices. This chart is inspired based on YoY growth. You might want to see the change in your P&L in the last few days, weeks, months, years etc.,",style:{color:"#1F2A33"}},xAxis:{type:"category",labels:{style:{fontSize:"13px",fontFamily:"Verdana, sans-serif"}}},yAxis:{labels:{enabled:!e.isPrivateMode,format:"{value}%"},title:{text:"P&L Change (%)"}},plotOptions:{column:{zones:[{value:-1e-8,color:"#FF897C"},{color:"#84C341"}]}},responsive:{rules:[{condition:{maxWidth:500},chartOptions:{chart:{height:300},yAxis:{labels:{enabled:!1}},subtitle:{text:void 0},navigator:{enabled:!1}}}]}}}),[e.isPrivateMode,e.portfolios]);return Object(pe.jsx)(Me,{title:"P&L % Change Over Multiple Time Periods",children:Object(pe.jsx)(Ce,{options:i})})}var $t=a.a.memo(Xt),en={from:"2004-01-02T00:00:00.000Z",to:"2021-05-15T00:00:00.000Z",high:{date:"2007-11-07T00:00:00.000Z",value:1.0905},low:{date:"2016-01-20T00:00:00.000Z",value:.6854},first:{date:"2007-01-02T00:00:00.000Z",value:.8584},last:{date:"2021-05-14T00:00:00.000Z",value:.82583203},difference:-.03256797,change:-.0379,data:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,.8584,.8548,.8498,.8507,.8507,.8507,.8491,.8486,.8495,.8502,.8546,.8546,.8546,.8561,.8514,.852,.8509,.8532,.8532,.8532,.8504,.8463,.8457,.8487,.8476,.8476,.8476,.8463,.8465,.848,.8507,.8447,.8447,.8447,.8462,.846,.8437,.8437,.8519,.8519,.8519,.8514,.8557,.8576,.8592,.8593,.8593,.8593,.8592,.8548,.8612,.8609,.8632,.8632,.8632,.8621,.8592,.8547,.8538,.8508,.8508,.8508,.8467,.8503,.8485,.8474,.8538,.8538,.8538,.8553,.8557,.8508,.8505,.8518,.8518,.8518,.8509,.8592,.8637,.8639,.8621,.8621,.8621,.8601,.8633,.8636,.8637,.8674,.8674,.8674,.865,.8641,.8633,.8689,.8689,.8689,.8689,.8679,.8711,.8734,.88,.8787,.8787,.8787,.8842,.8854,.8859,.8861,.8907,.8907,.8907,.8907,.8906,.8973,.8927,.8966,.8966,.8966,.9036,.9018,.902,.9033,.9034,.9034,.9034,.9071,.9051,.9038,.9031,.8981,.8981,.8981,.9034,.911,.9067,.911,.9188,.9188,.9188,.9188,.9212,.9244,.9224,.9263,.9263,.9263,.9258,.9329,.9299,.9347,.943,.943,.943,.9452,.9429,.9446,.9422,.9414,.9414,.9414,.9422,.9403,.9375,.936,.9364,.9364,.9364,.9327,.9399,.9393,.932,.9367,.9367,.9367,.9334,.9352,.9332,.941,.9404,.9404,.9404,.9404,.9438,.9461,.9464,.9542,.9542,.9542,.9543,.9505,.9471,.9552,.9545,.9545,.9545,.9588,.9582,.9581,.9591,.9579,.9579,.9579,.9568,.9641,.9592,.9519,.9443,.9443,.9443,.9358,.9384,.9462,.9499,.9498,.9498,.9498,.9498,.9476,.9525,.9465,.9491,.9491,.9491,.9516,.9402,.9306,.9298,.9403,.9403,.9403,.945,.9433,.9415,.9463,.9501,.9501,.9501,.9509,.9421,.9441,.9463,.9466,.9466,.9466,.9466,.9527,.9517,.9494,.9482,.9482,.9482,.9494,.9587,.9642,.9684,.9715,.9715,.9715,.9701,.9769,.9855,.9984,.9991,.9991,.9991,.9988,.999,.9952,.9969,1.0037,1.0037,1.0037,1.0069,.9996,1.0039,1.0017,1.0192,1.0192,1.0192,1.0192,1.0156,1.019,1.0264,1.0268,1.0268,1.0268,1.0248,1.0226,1.027,1.0273,1.0376,1.0376,1.0376,1.0193,1.0337,1.0297,1.0337,1.0396,1.0396,1.0396,1.0473,1.0488,1.0527,1.0527,1.0685,1.0685,1.0685,1.0708,1.0817,1.0905,1.0746,1.0648,1.0648,1.0648,1.0648,1.037,1.0409,1.0196,1.0279,1.0279,1.0279,1.0166,1.0152,1.0106,1.0156,1.0117,1.0117,1.0117,1.0125,1.0035,1.0093,1.0072,.9992,.9992,.9992,.9995,.9897,.9871,.9878,.9947,.9947,.9947,.9898,.9893,.9894,.9788,.9865,.9865,.9865,.9928,.9896,.9944,1.0017,1.0056,1.0056,1.0056,1.0131,1.0131,1.0131,1.0193,1.022,1.022,1.022,1.012,1.012,1.0074,1.0096,1.0009,1.0009,1.0009,.9949,1.0014,.9916,.9863,.9805,.9805,.9805,.9793,.9834,.9767,.9715,.9713,.9713,.9713,.9686,.9753,.9722,.9929,.9956,.9956,.9956,.9956,1.0023,1.0063,.9978,1.0057,1.0057,1.0057,1.0069,.9957,.9974,.9886,1.0009,1.0009,1.0009,.9983,1.0037,1.0005,1.003,.9984,.9984,.9984,.993,.9843,.9814,.9914,.9846,.9846,.9846,1.002,1.0143,1.0227,1.0289,1.0206,1.0206,1.0206,1.0132,1.0044,1.0103,1.0154,1.0086,1.0086,1.0086,1.0024,1.0047,1.0104,1.0161,1.0132,1.0132,1.0132,1.0022,1.0062,.9972,.9738,.9738,.9738,.9738,.9801,.9826,.9823,.9855,.9822,.9822,.9822,.9729,.9737,.9826,.9919,.991,.991,.991,.9891,.9852,.981,.9824,.979,.979,.979,.9796,.9822,.9975,.9888,.9917,.9917,.9917,.9934,.9967,.9809,.987,.9839,.9839,.9839,.9843,.9871,.9906,.9815,.982,.982,.982,.9877,.9965,.9979,.9853,.9939,.9939,.9939,.9961,.9995,.998,1.0002,1.0032,1.0032,1.0032,1.0032,1.007,1.0158,1.0141,1.0118,1.0118,1.0118,1.0105,1.0068,1.0086,1.013,1.0058,1.0058,1.0058,.9987,.9949,.9857,.9806,.9816,.9816,.9816,.978,.9763,.9829,.9773,.9726,.9726,.9726,.9793,.9805,.9817,.987,.9831,.9831,.9831,.984,.9866,.9867,.988,.9878,.9878,.9878,.9817,.9817,.9873,.9798,.9847,.9847,.9847,.983,.9797,.9893,.9899,.9909,.9909,.9909,.9939,.998,.9983,.9984,.9947,.9947,.9947,.9979,.9916,.9913,.9887,.9839,.9839,.9839,.9783,.9746,.9764,.9749,.9753,.9753,.9753,.9753,.9591,.9551,.9514,.9365,.9365,.9365,.9367,.9398,.9384,.9416,.9426,.9426,.9426,.943,.9428,.9409,.9564,.9562,.9562,.9562,.9557,.9539,.9537,.95,.9411,.9411,.9411,.9411,.9345,.9428,.9397,.9398,.9398,.9398,.9349,.9364,.9313,.9263,.9426,.9426,.9426,.9366,.9316,.9274,.9345,.9551,.9551,.9551,.9632,.9657,.9661,.9673,.9663,.9663,.9663,.9621,.9435,.9426,.9286,.9249,.9249,.9249,.9069,.9043,.889,.8706,.8398,.8398,.8398,.8398,.8619,.8473,.8367,.8458,.8458,.8458,.835,.8195,.8001,.7954,.7854,.7854,.7854,.7734,.7726,.8125,.8183,.822,.822,.822,.8421,.8696,.8624,.8462,.845,.845,.845,.8374,.8374,.8133,.812,.8165,.8165,.8165,.8189,.8171,.8084,.7779,.778,.778,.778,.8163,.8191,.8102,.8111,.8083,.8083,.8083,.808,.8051,.7954,.7974,.7711,.7711,.7711,.7954,.7935,.7964,.8208,.8031,.8031,.8031,.8096,.8171,.8293,.8358,.8147,.8147,.8147,.8205,.822,.8247,.8247,.8247,.8247,.8247,.8219,.8185,.8166,.8166,.826,.826,.826,.8393,.8458,.8437,.8412,.8387,.8387,.8387,.828,.8159,.8076,.7921,.7973,.7973,.7973,.7987,.7933,.7849,.7918,.8013,.8013,.8013,.8193,.8131,.8266,.8205,.8088,.8088,.8088,.8062,.8106,.8153,.8128,.8072,.8072,.8072,.8202,.8109,.8049,.8015,.8043,.8043,.8043,.8041,.7936,.7939,.794,.7974,.7974,.7974,.7992,.8019,.7964,.8028,.787,.787,.787,.7758,.7729,.7834,.7766,.7774,.7774,.7774,.7692,.7814,.7808,.7749,.7844,.7844,.7844,.7859,.7863,.7862,.8114,.8083,.8083,.8083,.8115,.8155,.8167,.811,.807,.807,.807,.7943,.7935,.791,.8075,.8106,.8106,.8106,.8046,.8103,.8095,.8147,.8147,.8147,.8147,.8189,.827,.8307,.829,.8233,.8233,.8233,.8102,.8092,.8091,.8137,.8269,.8269,.8269,.826,.8171,.8328,.8375,.8423,.8423,.8423,.8488,.8503,.8524,.8537,.8635,.8635,.8635,.8627,.8565,.8559,.8527,.8506,.8506,.8506,.8506,.8644,.8746,.8761,.8902,.8902,.8902,.8883,.8929,.8993,.899,.9123,.9123,.9123,.9198,.9236,.9111,.9092,.8972,.8972,.8972,.8905,.9057,.9008,.9106,.8947,.8947,.8947,.8818,.8828,.8794,.8871,.886,.886,.886,.866,.8651,.8725,.8636,.8672,.8672,.8672,.8633,.8602,.8602,.8618,.8605,.8605,.8605,.8612,.8598,.858,.8604,.8584,.8584,.8584,.8666,.8797,.8933,.8952,.8954,.8954,.8954,.9036,.9027,.9107,.9202,.9223,.9223,.9223,.9229,.9191,.9184,.9246,.9268,.9268,.9268,.9268,.9358,.9328,.9295,.9228,.9228,.9228,.9218,.9101,.9195,.9215,.9115,.9115,.9115,.9026,.9061,.9117,.9173,.926,.926,.926,.9309,.9275,.9098,.9124,.9192,.9192,.9192,.9118,.9065,.9038,.9063,.9184,.9184,.9184,.9184,.929,.927,.9249,.9306,.9306,.9306,.9211,.9291,.9378,.9422,.9325,.9325,.9325,.9279,.9361,.9325,.92,.9162,.9162,.9162,.9207,.9199,.9327,.9282,.9221,.9221,.9221,.9296,.946,.9417,.9492,.9593,.9593,.9593,.9593,.9711,.9716,.9706,.9626,.9626,.9626,.9701,.9524,.9604,.9537,.9517,.9517,.9517,.942,.9391,.9297,.9341,.9282,.9282,.9282,.9308,.9342,.9392,.9389,.9328,.9328,.9328,.9464,.9508,.9508,.9507,.9517,.9517,.9517,.956,.9441,.9524,.94,.9349,.9349,.9349,.9478,.9427,.9523,.9438,.9413,.9413,.9413,.9457,.9586,.9553,.9486,.9508,.9508,.9508,.9514,.943,.9477,.9507,.9447,.9447,.9447,.944,.9416,.9452,.9334,.9365,.9365,.9365,.9439,.9473,.9546,.9535,.9535,.9535,.9535,.9535,.9611,.9501,.9555,.9555,.9555,.9555,.9636,.9641,.9677,.9661,.9667,.9667,.9667,.9693,.9639,.9688,.9746,.9721,.9721,.9721,.9755,.9682,.9544,.9536,.9466,.9466,.9466,.945,.9429,.9384,.9396,.939,.939,.939,.9387,.9428,.9426,.9316,.9324,.9324,.9324,.9353,.9355,.9371,.9503,.9496,.9496,.9496,.9542,.9591,.9565,.9568,.9597,.9597,.9597,.959,.9508,.9479,.9368,.95,.95,.95,.9596,.9684,.9721,.97,.9722,.9722,.9722,.9722,.9755,.9763,.9742,.9816,.9816,.9816,.9788,.9854,.9888,.9863,.9847,.9847,.9847,.9811,.9825,.974,.9815,.9723,.9723,.9723,.9801,.9815,.9846,.9926,.9926,.9926,.9926,.9975,.9999,.997,.998,.9945,.9945,.9945,.9985,.9972,1.0039,.9986,.9854,.9854,.9854,.9803,1.0014,1.0016,.9987,.9973,.9973,.9973,.9991,.983,.9874,.9946,.9885,.9885,.9885,.9868,.9789,.9741,.9581,.9587,.9587,.9587,.976,.9809,.9803,.9853,.9667,.9667,.9667,.9611,.9681,.951,.9382,.9461,.9461,.9461,.9461,.9278,.9389,.9527,.9525,.9525,.9525,.9558,.9543,.9612,.9601,.9509,.9509,.9509,.9488,.9508,.962,.9674,.9678,.9678,.9678,.9753,.972,.9769,.9724,.9768,.9768,.9768,.9805,.9803,.9584,.9586,.9643,.9643,.9643,.9674,.9498,.9429,.9429,.9391,.9391,.9391,.9381,.9526,.9499,.9573,.9682,.9682,.9682,.9635,.9724,.9703,.9613,.949,.949,.949,.9471,.95,.959,.9638,.964,.964,.964,.9697,.9655,.9655,.9643,.9718,.9718,.9718,.9718,.978,.9818,.9844,.9734,.9734,.9734,.9741,.9664,.9564,.9584,.9614,.9614,.9614,.9586,.9697,.9719,.9616,.9524,.9524,.9524,.9511,.9467,.9397,.9482,.9482,.9482,.9482,.9468,.9399,.9527,.9506,.9605,.9605,.9605,.9605,.959,.9653,.9682,.9654,.9654,.9654,.9729,.9783,.9726,.9733,.968,.968,.968,.9727,.9695,.9683,.9699,.9744,.9744,.9744,.9747,.9703,.9709,.9711,.979,.979,.979,.9771,.9835,.9928,.9837,.9866,.9866,.9866,.9866,.9891,.997,.9964,.9893,.9893,.9893,.9853,.9711,.9761,.9772,.9744,.9744,.9744,.9806,.9782,.969,.9802,.9815,.9815,.9815,.9866,.9902,.9909,.9976,.9985,.9985,.9985,.9978,.9987,.9983,.9983,.9921,.9921,.9921,.9935,.9774,.9797,.9829,.9796,.9796,.9796,.9816,.9761,.9893,.9918,.9813,.9813,.9813,.9778,.9743,.9843,.9954,.994,.994,.994,.9942,.9908,.9902,.9903,.9908,.9908,.9908,.9954,.9959,.9965,.9944,.9878,.9878,.9878,.9825,.9828,.9854,.9906,.9936,.9936,.9936,.9936,.9936,.9997,.9991,1.0054,1.0054,1.0054,1.0054,1.0014,1.0053,1.0046,1.0066,1.0066,1.0066,1.0076,1.0098,1.0138,1.0134,1.0097,1.0097,1.0097,1.014,1.009,1.0061,.9999,1.0055,1.0055,1.0055,1.0066,1.0014,1.0047,1.0059,1.001,1.001,1.001,.9978,1.0079,1.0118,1.01,1.01,1.01,1.01,1.0115,1.0095,1.0053,1.0045,1.0098,1.0098,1.0098,1.0116,1.0114,1.0147,1.0164,1.0173,1.0173,1.0173,1.0165,1.0143,1.0077,1.0161,1.0195,1.0195,1.0195,1.0268,1.0264,1.0273,1.026,1.0294,1.0294,1.0294,1.0269,1.0295,1.0324,1.0276,1.0273,1.0273,1.0273,1.0247,1.0173,1.0083,1.0116,1.0158,1.0158,1.0158,1.0231,1.0238,1.0182,1.0259,1.0227,1.0227,1.0227,1.0248,1.0245,1.0294,1.029,1.0385,1.0385,1.0385,1.0332,1.0378,1.043,1.0424,1.0454,1.0454,1.0454,1.0474,1.039,1.0373,1.0389,1.04,1.04,1.04,1.0319,1.0448,1.05,1.0505,1.0505,1.0505,1.0505,1.0481,1.0519,1.0472,1.0514,1.0542,1.0542,1.0542,1.0535,1.0537,1.0438,1.0342,1.0398,1.0398,1.0398,1.0351,1.0406,1.0436,1.0354,1.03,1.03,1.03,1.0306,1.0232,1.0285,1.0308,1.0272,1.0272,1.0272,1.0272,1.0231,1.0241,1.0195,1.0234,1.0234,1.0234,1.0241,1.0322,1.0294,1.0211,1.0235,1.0235,1.0235,1.022,1.0262,1.0225,1.0275,1.0238,1.0238,1.0238,1.0226,1.0324,1.0225,1.016,1.0207,1.0207,1.0207,1.022,1.0284,1.0282,1.0205,1.0153,1.0153,1.0153,1.0141,1.0182,1.0304,1.037,1.037,1.037,1.037,1.0419,1.0408,1.0355,1.0432,1.0387,1.0387,1.0387,1.0346,1.0343,1.0436,1.0433,1.0487,1.0487,1.0487,1.04,1.052,1.055,1.0581,1.0524,1.0524,1.0524,1.0583,1.0583,1.0555,1.0544,1.0484,1.0484,1.0484,1.0484,1.0438,1.038,1.0239,1.016,1.016,1.016,1.0111,1.0108,1.0091,1.0109,1.0122,1.0122,1.0122,1.0165,1.0186,1.0183,1.01,1.0153,1.0153,1.0153,1.01,1.0125,1.0121,1.016,1.0149,1.0149,1.0149,1.0225,1.0211,1.0221,1.0254,1.0188,1.0188,1.0188,1.0188,1.0091,1.0118,1.0143,1.0029,1.0029,1.0029,1.0043,1.0099,1.0088,1.0133,1.019,1.019,1.019,1.0103,1.0077,1.0014,.9681,.9726,.9726,.9726,.9672,.9813,.978,.9673,.9626,.9626,.9626,.9579,.943,.957,.9588,.9682,.9682,.9682,.9682,.9721,.9839,.9768,.9855,.9855,.9855,.985,.984,.9866,.9787,.991,.991,.991,.9961,.9858,.99,1.0058,1.0043,1.0043,1.0043,1.0065,.9806,.9876,.9875,.9823,.9823,.9823,.9831,.9862,.983,.9814,.9814,.9814,.9814,.9825,.977,.9798,.9779,.9745,.9745,.9745,.9629,.9645,.9542,.9552,.9536,.9536,.9536,.9683,.9713,.9807,.9829,.9838,.9838,.9838,.9861,.9884,.9896,.9811,.9803,.9803,.9803,.9732,.9724,.961,.9674,.9626,.9626,.9626,.9649,.9723,.9722,.979,.9796,.9796,.9796,.9796,.9796,.9771,.9794,.9833,.9833,.9833,.9833,.9911,.9867,.9807,.9773,.9773,.9773,.9735,.9839,.9812,.9806,.9761,.9761,.9761,.9833,.987,.9862,.9906,.9859,.9859,.9859,.9921,.9904,.9881,1.0014,.9987,.9987,.9987,.9968,.9948,1.0029,1.0015,1.0055,1.0055,1.0055,1.0046,1.0052,1.003,1.0059,.9984,.9984,.9984,1.0004,1.0009,1.0035,1.0038,1.003,1.003,1.003,1.0077,1.0045,1,1.0015,1.0012,1.0012,1.0012,1.0017,1.0044,1.0136,1.0153,1.0113,1.0113,1.0113,1.0064,.9985,1.0007,1.008,1.0106,1.0106,1.0106,1.0065,1.0096,1.0086,1.0072,1.0087,1.0087,1.0087,1.0121,1.0067,1.0069,.9997,1.0018,1.0018,1.0018,1.0079,1.0073,1.0016,1.0001,1.0009,1.0009,1.0009,1.0084,1.0091,1.0038,1.0073,1.0073,1.0073,1.0073,1.0028,.9972,.9961,1.005,1.0021,1.0021,1.0021,.9976,1.0124,1.0099,1.0074,1.009,1.009,1.009,1.0064,1.0118,1.0154,1.0162,1.0197,1.0197,1.0197,1.0117,1.0164,1.011,1.0134,1.0044,1.0044,1.0044,1.0065,1.0003,.9985,.9983,1.0032,1.0032,1.0032,.9981,.9971,.9899,.9839,.9794,.9794,.9794,.9794,.9813,.9732,.9732,.9723,.9723,.9723,.9765,.9753,.9722,.9663,.9634,.9634,.9634,.9599,.9602,.9712,.9762,.9679,.9679,.9679,.9725,.9739,.9737,.9759,.9762,.9762,.9762,.9741,.9825,.981,.9755,.9747,.9747,.9747,.9706,.9742,.9749,.9678,.9813,.9813,.9813,.9813,.9878,.9874,.9871,.9805,.9805,.9805,.9792,.9801,.9809,.979,.9851,.9851,.9851,.9845,.9861,.9889,.9924,.9887,.9887,.9887,.9831,.9796,.9822,.99,.994,.994,.994,.9967,.9986,.9983,.9938,1.0014,1.0014,1.0014,1.0014,1.0036,1.0053,1.0077,1.0085,1.0085,1.0085,1.0067,1.0087,1.011,1.012,1.0116,1.0116,1.0116,1.0111,1.0138,1.0072,1.0073,1.0081,1.0081,1.0081,1.0109,1.0138,1.0127,1.0075,1.0139,1.0139,1.0139,1.0139,1.0139,1.0099,1.0178,1.0227,1.0227,1.0227,1.0244,1.0284,1.0249,1.0253,1.0299,1.0299,1.0299,1.0285,1.0265,1.0262,1.0231,1.0252,1.0252,1.0252,1.0203,1.0235,1.0161,1.019,1.0166,1.0166,1.0166,1.0176,1.0174,1.0132,1.0181,1.0243,1.0243,1.0243,1.0243,1.0217,1.0218,1.0223,1.0205,1.0205,1.0205,1.0221,1.0148,1.0208,1.0196,1.0068,1.0068,1.0068,1.0062,1.0066,1.0054,1.0058,1.001,1.001,1.001,.9996,1.0006,1.0004,1.0027,1.0036,1.0036,1.0036,1.0035,1.0064,1.0028,1.0014,.9994,.9994,.9994,.9994,.9984,.9982,.9975,.9972,.9972,.9972,1.0036,1.003,1.002,1.0026,1.0074,1.0074,1.0074,1.0051,1.0064,1.0072,1.007,1.0068,1.0068,1.0068,1.0073,1.0074,1.0089,1.0091,1.0111,1.0111,1.0111,1.013,1.0135,1.0148,1.0155,1.0142,1.0142,1.0142,1.0162,1.0148,1.0134,1.0118,1.0058,1.0058,1.0058,1.0088,1.0088,1.0088,1.0051,1.0048,1.0048,1.0048,1.0051,1.0051,1.0143,1.0149,1.0146,1.0146,1.0146,1.0142,1.0129,1.0134,1.0142,1.0162,1.0162,1.0162,1.0163,1.0164,1.0152,1.0149,1.0063,1.0063,1.0063,1.0067,1.0066,1.0014,.9974,.9923,.9923,.9923,.9931,.9971,.9967,1.0008,1.0013,1.0013,1.0013,1.0023,1.0028,1.004,1.0007,.998,.998,.998,.9935,.9971,.998,.9992,.993,.993,.993,.993,.9883,.984,.9818,.9781,.9781,.9781,.9742,.9728,.9756,.9723,.9723,.9723,.9723,.9711,.9718,.9696,.9707,.9734,.9734,.9734,.9739,.9752,.9734,.9746,.9811,.9811,.9811,.9788,.9733,.9739,.9765,.978,.978,.978,.9787,.9837,.9833,.9846,.9846,.9846,.9846,.9836,.9854,.9868,.9863,.9813,.9813,.9813,.9806,.9841,.9852,.9894,.9868,.9868,.9868,.9798,.9775,.9745,.9751,.9743,.9743,.9743,.9744,.9748,.9737,.981,.9833,.9833,.9833,.9864,.9929,.9917,.9918,.9922,.9922,.9922,.9926,.9948,.9977,.9973,.9878,.9878,.9878,.9893,.9854,.983,.984,.9738,.9738,.9738,.9738,.973,.9678,.9699,.9687,.9687,.9687,.9681,.9642,.9643,.97,.9672,.9672,.9672,.9717,.9664,.9667,.9768,.9794,.9794,.9794,.9816,.9814,.9802,.9833,.9826,.9826,.9826,.9827,.9795,.9816,.9627,.9551,.9551,.9551,.9495,.9512,.9552,.9542,.9513,.9513,.9513,.9513,.9497,.9503,.9512,.9463,.9463,.9463,.9455,.9497,.9514,.9626,.9623,.9623,.9623,.9603,.9626,.9592,.9619,.965,.965,.965,.9674,.9705,.9711,.9725,.9717,.9717,.9717,.9746,.9715,.9721,.9673,.9632,.9632,.9632,.9632,.9635,.9601,.9664,.9706,.9706,.9706,.9712,.9667,.9688,.9671,.9667,.9667,.9667,.9677,.9638,.9576,.9513,.951,.951,.951,.9511,.9521,.9533,.95,.9476,.9476,.9476,.9476,.9494,.954,.9524,.9625,.9625,.9625,.9647,.9655,.9674,.969,.967,.967,.967,.9694,.9717,.9697,.9768,.9721,.9721,.9721,.9725,.9713,.9713,.9689,.9709,.9709,.9709,.9723,.9678,.9679,.9687,.9703,.9703,.9703,.9703,.968,.9618,.9631,.9629,.9629,.9629,.9629,.9642,.9667,.9723,.9721,.9721,.9721,.9712,.9724,.9629,.9595,.9569,.9569,.9569,.9574,.9574,.9564,.9589,.9576,.9576,.9576,.9602,.9571,.9598,.9577,.9536,.9536,.9536,.9536,.9522,.9553,.9527,.9562,.9562,.9562,.959,.9555,.9574,.9518,.9492,.9492,.9492,.9475,.9481,.9438,.944,.9435,.9435,.9435,.9404,.9379,.9349,.94,.9378,.9378,.9378,.9398,.9414,.9428,.9398,.9438,.9438,.9438,.9454,.9425,.9394,.9367,.9363,.9363,.9363,.9431,.9417,.9417,.9417,.9348,.9348,.9348,.9398,.9402,.9402,.9405,.9422,.9422,.9422,.9382,.9309,.9256,.9216,.916,.916,.916,.92,.9146,.9147,.9152,.9123,.9123,.9123,.9122,.9114,.9034,.8985,.904,.904,.904,.9011,.897,.897,.8952,.8994,.8994,.8994,.9029,.9046,.9008,.9037,.9076,.9076,.9076,.9051,.907,.9097,.9107,.9107,.9107,.9107,.9107,.913,.9054,.9006,.8986,.8986,.8986,.9043,.9022,.8995,.8977,.9029,.9029,.9029,.9016,.8998,.9049,.9119,.9018,.9018,.9018,.9005,.9021,.8983,.9044,.902,.902,.902,.9048,.902,.8945,.8888,.8933,.8933,.8933,.8915,.8948,.8974,.9044,.9038,.9038,.9038,.9047,.9069,.9065,.9062,.9109,.9109,.9109,.9115,.9156,.9172,.9164,.9124,.9124,.9124,.9116,.9107,.9068,.9093,.9093,.9093,.9093,.9074,.9069,.9065,.9069,.9056,.9056,.9056,.9064,.9122,.9127,.912,.9113,.9113,.9113,.9128,.9183,.9178,.921,.9174,.9174,.9174,.9185,.9181,.9185,.9185,.9189,.9189,.9189,.9189,.9173,.9147,.9176,.92,.92,.92,.9213,.92,.9202,.9228,.9202,.9202,.9202,.9179,.9162,.9143,.9146,.9144,.9144,.9144,.9166,.9162,.9202,.9216,.9201,.9201,.9201,.9217,.9215,.92,.9235,.9289,.9289,.9289,.9319,.9311,.9327,.934,.9367,.9367,.9367,.9367,.9367,.9375,.9404,.9399,.9399,.9399,.9379,.9369,.939,.9383,.9328,.9328,.9328,.9327,.9289,.9302,.93,.9314,.9314,.9314,.9314,.9307,.931,.9309,.9247,.9247,.9247,.9258,.9216,.9167,.9183,.9158,.9158,.9158,.9158,.9116,.9152,.9156,.9106,.9106,.9106,.9145,.9137,.915,.9165,.9166,.9166,.9166,.9184,.915,.9137,.9134,.9132,.9132,.9132,.9107,.9132,.9182,.9211,.921,.921,.921,.921,.9153,.9197,.9206,.9183,.9183,.9183,.9147,.9081,.9128,.9065,.9029,.9029,.9029,.9049,.9099,.9131,.9136,.9117,.9117,.9117,.9084,.9042,.9017,.9004,.8957,.8957,.8957,.8973,.8922,.8952,.8968,.8884,.8884,.8884,.8949,.8943,.8943,.8969,.8947,.8947,.8947,.8947,.89,.8858,.8876,.889,.889,.889,.8868,.8913,.8913,.8899,.8918,.8918,.8918,.8891,.8946,.898,.8934,.8869,.8869,.8869,.8834,.8774,.879,.8754,.8803,.8803,.8803,.8814,.8814,.8862,.8811,.8854,.8854,.8854,.8843,.8846,.8811,.884,.8898,.8898,.8898,.8864,.888,.89,.8824,.8751,.8751,.8751,.8815,.8772,.8803,.8793,.8754,.8754,.8754,.8717,.8755,.8709,.8669,.8666,.8666,.8666,.8598,.8602,.8599,.8625,.8599,.8599,.8599,.8589,.8601,.8604,.8604,.8604,.8604,.8604,.8597,.8621,.862,.862,.8527,.8527,.8527,.8484,.8472,.8438,.8466,.8434,.8434,.8434,.8382,.837,.8363,.8381,.8343,.8343,.8343,.8357,.8275,.8081,.8083,.8063,.8063,.8063,.8057,.8062,.8031,.7909,.7863,.7863,.7863,.795,.8028,.7968,.805,.7985,.7985,.7985,.8033,.7982,.7915,.8024,.8033,.8033,.8033,.8033,.8063,.8029,.8009,.7996,.7996,.7996,.7949,.7935,.8052,.8006,.7995,.7995,.7995,.7978,.8031,.8039,.8012,.7926,.7926,.7926,.7938,.7916,.7835,.788,.7811,.7811,.7811,.7834,.7831,.783,.7847,.794,.794,.794,.799,.7993,.7992,.8019,.7949,.7949,.7949,.7881,.7885,.7929,.7946,.7946,.7946,.7946,.8031,.8008,.7995,.7949,.794,.794,.794,.7935,.8014,.8078,.8193,.8177,.8177,.8177,.8194,.8147,.8163,.8232,.822,.822,.822,.8261,.8319,.8365,.8252,.8202,.8202,.8202,.8257,.8306,.8327,.8238,.8273,.8273,.8273,.8261,.8342,.8368,.8339,.8326,.8326,.8326,.8326,.8189,.8189,.8196,.8138,.8138,.8138,.8127,.8045,.801,.8015,.8022,.8022,.8022,.7968,.805,.8041,.8015,.8007,.8007,.8007,.8042,.8119,.8152,.8121,.8127,.8127,.8127,.8115,.811,.8125,.8191,.8144,.8144,.8144,.8138,.8112,.8055,.8099,.8091,.8091,.8091,.8076,.8017,.8017,.7958,.7955,.7955,.7955,.792,.7849,.786,.7856,.7865,.7865,.7865,.7836,.7844,.773,.7729,.7693,.7693,.7693,.7703,.7715,.7677,.7675,.7657,.7657,.7657,.7687,.7732,.7756,.7677,.7665,.7665,.7665,.7665,.7619,.7586,.7603,.7621,.7621,.7621,.7659,.7606,.7708,.7646,.7646,.7646,.7646,.7639,.7649,.7596,.7645,.7605,.7605,.7605,.7568,.7521,.7517,.7577,.7536,.7536,.7536,.7563,.7588,.7513,.7576,.7534,.7534,.7534,.7534,.7579,.7563,.7565,.7532,.7532,.7532,.7536,.754,.7588,.7584,.7606,.7606,.7606,.7547,.7531,.751,.749,.7505,.7505,.7505,.7484,.7455,.7466,.7552,.7568,.7568,.7568,.7642,.7659,.7671,.7682,.7724,.7724,.7724,.7724,.7701,.7703,.775,.7732,.7732,.7732,.7693,.7708,.7624,.7641,.7592,.7592,.7592,.7614,.7552,.7606,.7593,.7644,.7644,.7644,.7637,.763,.7596,.7595,.7514,.7514,.7514,.7533,.7542,.7542,.7515,.7501,.7501,.7501,.7489,.7505,.7489,.7537,.7497,.7497,.7497,.7487,.7514,.7518,.7519,.7485,.7485,.7485,.75,.7478,.7485,.7466,.7482,.7482,.7482,.7403,.7357,.7356,.7353,.7301,.7301,.7301,.7282,.7284,.7244,.7158,.7204,.7204,.7204,.7148,.7179,.7215,.7223,.7223,.7223,.7223,.7223,.722,.7203,.7225,.7225,.7225,.7225,.7159,.7146,.71,.7112,.7067,.7067,.7067,.704,.6997,.6996,.6957,.6883,.6883,.6883,.6893,.689,.6854,.7021,.7067,.7067,.7067,.7017,.7111,.7121,.7106,.7102,.7102,.7102,.714,.7123,.7222,.7285,.7207,.7207,.7207,.7183,.7236,.7159,.7179,.7228,.7228,.7228,.7228,.7215,.7308,.7288,.7246,.7246,.7246,.7307,.7251,.7264,.7366,.7382,.7382,.7382,.7395,.7459,.7425,.7459,.7498,.7498,.7498,.7518,.7469,.7555,.7478,.7567,.7567,.7567,.7523,.7486,.7484,.7702,.7703,.7703,.7703,.7652,.7662,.7574,.7536,.7536,.7536,.7536,.7585,.7602,.7715,.771,.7665,.7665,.7665,.7671,.7593,.7647,.7597,.7695,.7695,.7695,.7744,.7813,.7817,.7791,.7777,.7777,.7777,.7803,.7901,.792,.7868,.789,.789,.789,.7886,.7928,.7915,.7972,.7969,.7969,.7969,.7969,.7883,.7762,.778,.7739,.7739,.7739,.7696,.7717,.7791,.7777,.7728,.7728,.7728,.776,.7761,.7735,.7624,.7613,.7613,.7613,.7613,.7623,.7623,.7623,.7623,.7623,.7623,.7623,.7634,.7639,.7645,.7723,.7723,.7723,.7778,.7819,.7877,.7855,.7852,.7852,.7852,.7817,.7791,.7744,.7668,.7765,.7765,.7765,.7808,.7802,.78,.7842,.7721,.7721,.7721,.7646,.7639,.7698,.7687,.7687,.7687,.7687,.7786,.7723,.7689,.7702,.7649,.7649,.7649,.7618,.7683,.7713,.7743,.7707,.7707,.7707,.7702,.7675,.7669,.7659,.7588,.7588,.7588,.7561,.7571,.7564,.7593,.7668,.7668,.7668,.7668,.764,.7645,.7678,.7587,.7587,.7587,.7596,.7624,.7657,.7688,.7725,.7725,.7725,.7739,.7775,.7761,.7828,.7765,.7765,.7765,.7727,.7751,.7728,.773,.7724,.7724,.7724,.7681,.7648,.762,.763,.7693,.7693,.7693,.7693,.7786,.7755,.7747,.7673,.7673,.7673,.7647,.7595,.7582,.7607,.7568,.7568,.7568,.7587,.756,.7584,.7669,.7596,.7596,.7596,.7577,.7548,.7552,.7633,.7624,.7624,.7624,.7612,.7593,.7588,.757,.7517,.7517,.7517,.7517,.7553,.7532,.7565,.7594,.7594,.7594,.7612,.7631,.763,.7577,.7505,.7505,.7505,.7469,.75,.7485,.747,.7471,.7471,.7471,.7461,.7474,.7468,.747,.7456,.7456,.7456,.7472,.7498,.7458,.7421,.7421,.7421,.7421,.7363,.7425,.7454,.7447,.7397,.7397,.7397,.7442,.7438,.7424,.7415,.74,.74,.74,.7462,.7443,.7448,.7501,.752,.752,.752,.7535,.753,.7546,.7564,.7596,.7596,.7596,.761,.7622,.762,.7464,.7497,.7497,.7497,.7464,.7475,.7462,.7425,.7388,.7388,.7388,.7388,.7388,.7377,.7414,.7448,.7448,.7448,.7448,.74432,.75103,.75506,.75677,.7567,.7567,.75529,.75683,.75472,.76301,.76098,.7613,.7613,.76034,.76587,.76342,.75171,.74873,.7497,.7497,.75239,.75907,.76406,.76318,.76202,.7629,.7629,.76254,.76746,.76488,.76829,.76829,.769,.769,.76342,.75947,.76005,.76179,.76429,.7649,.7649,.76441,.76511,.76406,.76599,.76324,.7624,.7624,.7624,.76057,.75867,.76278,.76365,.7631,.7631,.76231,.75477,.74974,.74699,.74599,.7452,.7452,.74605,.74532,.74212,.74003,.74272,.7424,.7424,.74366,.74162,.74471,.75081,.74979,.748,.748,.74862,.75092,.7485,.74985,.74772,.7478,.7478,.74778,.74772,.74828,.75165,.75131,.7506,.7506,.74716,.74488,.74577,.74527,.74655,.7464,.7464,.74912,.75008,.75188,.7533,.7539,.7539,.7539,.7525,.74755,.74294,.74173,.74041,.7406,.7406,.74118,.73573,.73567,.734,.73196,.7318,.7318,.73206,.72886,.72918,.72764,.72929,.7318,.7318,.72966,.72844,.73142,.72955,.72918,.7318,.7318,.73308,.73551,.73454,.7347,.73833,.7318,.7318,.7318,.74129,.74294,.74333,.74316,.7318,.7318,.74372,.74245,.74074,.74074,.74052,.7318,.7318,.74167,.74289,.74118,.74058,.74333,.7318,.7318,.74543,.7554,.75706,.75284,.75574,.75574,.75574,.75643,.75375,.75131,.75523,.75369,.75369,.75369,.7554,.75827,.7657,.76834,.77059,.77059,.77059,.77059,.77274,.7703,.77244,.77598,.77598,.77598,.77592,.77399,.78162,.78474,.78914,.78914,.78914,.78933,.79189,.79397,.7946,.79688,.79688,.79688,.79923,.79955,.79968,.79872,.80341,.80341,.80341,.80096,.79911,.79618,.79504,.79126,.79126,.79126,.79126,.78914,.78709,.78672,.78833,.78833,.78833,.78709,.78401,.78746,.7907,.79453,.79453,.79453,.79523,.79669,.79592,.79815,.80051,.80051,.80051,.80115,.79904,.79334,.7977,.8071,.8071,.8071,.8071,.80834,.81539,.82318,.82427,.82427,.82427,.82454,.82244,.82055,.81981,.82088,.82088,.82088,.81713,.81453,.8148,.81044,.81189,.81189,.81189,.81031,.80841,.80567,.80321,.80128,.80128,.80128,.79968,.8,.80135,.79694,.79688,.79688,.79688,.79688,.79994,.80013,.8018,.80083,.80083,.80083,.79815,.79694,.8009,.80141,.79359,.79359,.79359,.79089,.78952,.78302,.77936,.77676,.77676,.77676,.779,.77561,.7761,.77991,.78345,.78345,.78345,.78456,.78217,.78561,.7879,.78846,.78846,.78846,.78846,.78536,.7829,.78462,.78229,.78229,.78229,.78168,.7826,.78561,.78647,.78691,.78691,.78691,.78524,.78082,.77803,.77592,.78561,.78561,.78561,.78771,.78864,.78388,.77863,.7776,.7776,.7776,.77797,.77694,.77809,.78094,.77918,.77918,.77918,.7773,.77604,.77869,.7853,.78376,.78376,.78376,.78376,.78376,.79108,.79441,.79713,.79713,.79713,.79713,.79891,.79789,.79904,.80626,.80626,.80626,.80502,.80295,.80026,.79777,.79974,.79974,.79974,.80502,.80522,.80483,.80347,.80263,.80263,.80263,.8027,.80295,.81031,.81149,.81162,.81162,.81162,.8107,.81116,.81347,.8138,.80775,.80775,.80775,.80109,.79808,.79707,.7946,.79308,.79308,.79308,.79346,.79365,.79605,.79605,.79745,.79745,.79745,.79745,.79227,.7892,.78684,.78939,.78939,.78939,.78827,.78493,.7807,.77815,.77574,.77574,.77574,.77059,.77531,.77531,.77357,.77882,.77882,.77882,.77942,.77447,.77256,.76734,.76406,.76406,.76406,.76458,.7647,.77172,.77471,.77785,.77785,.77785,.77604,.77706,.77507,.77555,.77555,.77555,.77555,.77471,.78052,.7807,.78272,.78345,.78345,.78345,.78561,.79252,.79466,.7939,.79384,.79384,.79384,.79498,.79669,.79277,.79158,.78567,.78567,.78567,.77924,.77954,.77706,.77748,.77779,.77779,.77779,.77906,.77718,.77815,.77748,.77754,.77754,.77754,.77736,.77143,.77785,.78278,.78253,.78253,.78253,.78278,.77664,.7807,.78119,.7764,.7764,.7764,.7764,.78211,.77664,.77574,.77077,.77077,.77077,.76917,.76805,.77537,.77232,.77137,.77137,.77137,.77351,.76965,.77441,.77089,.77149,.77149,.77149,.76965,.76899,.76994,.76617,.7589,.7589,.7589,.7589,.75324,.75182,.75131,.75143,.75143,.75143,.75171,.75154,.75148,.75375,.75942,.75942,.75942,.75942,.76023,.76086,.76167,.76307,.76307,.76307,.76353,.7619,.7604,.75953,.75924,.75924,.75924,.76121,.75832,.75735,.75443,.76092,.76092,.76092,.76011,.76005,.76406,.7654,.76558,.76558,.76558,.76799,.76823,.76911,.7684,.77024,.77024,.77024,.77024,.76787,.76617,.76687,.7626,.7626,.7626,.76127,.76412,.76115,.76034,.76447,.76447,.76447,.7654,.76711,.76829,.76552,.76711,.76711,.76711,.77006,.77417,.77334,.77042,.76599,.76599,.76599,.76599,.75861,.75844,.75827,.75965,.75965,.75965,.75971,.76098,.7684,.76941,.76728,.76728,.76728,.76811,.7697,.77238,.77489,.77423,.77423,.77423,.7731,.77232,.77071,.76658,.7725,.7725,.7725,.78107,.78021,.7793,.77519,.77304,.77304,.77304,.77304,.77131,.7697,.76699,.7674,.7674,.7674,.76965,.77292,.76959,.76587,.76313,.76313,.76313,.76307,.76348,.76752,.76476,.76289,.76289,.76289,.76225,.76144,.76092,.76406,.76307,.76307,.76307,.76359,.76161,.76359,.76254,.75723,.75723,.75723,.75723,.75523,.75523,.75746,.76023,.76023,.76023,.75861,.7542,.75358,.75729,.75597,.75597,.75597,.75586,.7525,.75177,.7533,.75182,.75182,.75182,.75809,.75649,.7489,.74605,.75194,.75194,.75194,.74744,.74616,.74929,.74856,.74744,.74744,.74744,.74632,.74327,.74349,.74102,.73714,.73714,.73714,.73589,.73589,.73589,.73308,.73325,.73325,.73325,.73303,.73303,.73529,.74069,.74571,.74571,.74571,.75115,.75228,.75637,.75563,.75563,.7542,.7542,.75364,.75381,.75483,.75222,.75415,.75415,.75415,.75205,.74963,.74918,.74901,.75438,.75438,.75438,.75415,.75381,.75804,.7608,.76365,.76365,.76365,.76179,.76138,.75815,.75273,.75358,.75358,.75358,.75222,.75483,.75529,.75199,.75381,.75381,.75381,.75381,.7554,.75936,.75781,.75913,.75913,.75913,.75907,.75786,.76075,.75936,.75415,.75415,.75415,.75092,.74934,.74516,.74416,.74505,.74505,.74505,.74549,.7475,.75041,.75036,.74951,.74951,.74951,.74934,.75233,.75092,.74817,.74566,.74566,.74566,.74516,.74705,.74549,.74466,.74833,.74833,.74833,.74979,.7494,.75053,.74867,.74705,.74705,.74705,.75047,.75098,.75041,.7475,.75024,.75024,.75024,.74884,.74845,.75008,.74727,.74727,.74727,.74727,.7489,.7451,.74212,.74113,.74294,.74294,.74294,.74316,.74499,.74538,.74283,.74466,.74466,.74466,.74316,.74206,.74261,.74167,.74527,.74527,.74527,.74311,.74245,.74344,.7441,.7425,.7425,.7425,.7425,.74555,.74571,.74195,.74366,.74366,.74366,.74394,.742,.73997,.74069,.73926,.73926,.73926,.74239,.74239,.74621,.7475,.75284,.75284,.75284,.75375,.75313,.75171,.75053,.7471,.7471,.7471,.74588,.7466,.74946,.75809,.75689,.75689,.75689,.75792,.75907,.76161,.76272,.76412,.76412,.76412,.76412,.76254,.76494,.76576,.76342,.76342,.76342,.76447,.76179,.76383,.76505,.76699,.76699,.76699,.76693,.76617,.76611,.76517,.76505,.76505,.76505,.76318,.76092,.76121,.76069,.75861,.75861,.75861,.75994,.75942,.76057,.7566,.75614,.75614,.75614,.75614,.75455,.75064,.75432,.75637,.75637,.75637,.75563,.75552,.7513,.75047,.75267,.75267,.75267,.75199,.75058,.75313,.75228,.75131,.75131,.75131,.75307,.75375,.75182,.75211,.75216,.75216,.75216,.75216,.74946,.75398,.75597,.75907,.75907,.75907,.76017,.76028,.75867,.75729,.75432,.75432,.75432,.75483,.75432,.75352,.7542,.7533,.7533,.7533,.75358,.75477,.75358,.75415,.75477,.75477,.75477,.75512,.75506,.75222,.75019,.75092,.75092,.75092,.75154,.75058,.75053,.75222,.75769,.75769,.75769,.75769,.75694,.75752,.76086,.7615,.7615,.7615,.76359,.76371,.76418,.76482,.76546,.76546,.76546,.76593,.76482,.76034,.75988,.76005,.76005,.76005,.76057,.76028,.75878,.75896,.75626,.75626,.75626,.75626,.75597,.75477,.75426,.7558,.7558,.7558,.75677,.75546,.75165,.75273,.75262,.75262,.75262,.75148,.75256,.75313,.75273,.7525,.7525,.7525,.75205,.75177,.75626,.75907,.75443,.75443,.75443,.75557,.75569,.75752,.75861,.75855,.75855,.75855,.76092,.75988,.76225,.76208,.75965,.75965,.75965,.75988,.76005,.76005,.76005,.76464,.76464,.76464,.76576,.76994,.76994,.76994,.76994,.76994,.76994,.76994,.76994,.7677,.76458,.76622,.76622,.76622,.7664,.76558,.76628,.76658,.76558,.76558,.76558,.76611,.76529,.76243,.76086,.76104,.76104,.76104,.75861,.75878,.75781,.7566,.75569,.75569,.75569,.7533,.75313,.7525,.75245,.7516,.7516,.7516,.75081,.75233,.75449,.75438,.75477,.75477,.75477,.75477,.75426,.7558,.75449,.7562,.7562,.7562,.75307,.75296,.75148,.74845,.74466,.74466,.74466,.74873,.74833,.74671,.74543,.7451,.7451,.7451,.7354,.72828,.72754,.72359,.71937,.71937,.71937,.71613,.70547,.68985,.68989,.69774,.69774,.69774,.69051,.69008,.6992,.71038,.71144,.71144,.71144,.70641,.70487,.70338,.70527,.70711,.70711,.70711,.70786,.715,.71256,.71505,.71505,.71505,.71505,.71757,.71922,.70992,.70811,.7124,.7124,.7124,.70992,.70408,.70646,.71109,.70972,.70972,.70972,.71159,.71541,.71829,.71891,.71093,.71093,.71093,.70998,.71266,.70801,.71352,.71767,.71767,.71767,.71367,.71352,.71058,.70972,.70952,.70952,.70952,.70952,.71979,.71984,.71762,.71352,.71352,.71352,.7151,.72443,.72569,.72653,.72532,.72532,.72532,.73368,.73992,.74052,.7403,.74466,.74466,.74466,.74722,.74499,.74683,.73784,.73551,.73551,.73551,.73508,.73757,.73774,.73589,.736,.736,.736,.73828,.73986,.73578,.73287,.73121,.73121,.73121,.73089,.73378,.73378,.73605,.73719,.73719,.73719,.73839,.73621,.73866,.73774,.73562,.73562,.73562,.73708,.73443,.73888,.73839,.7367,.7367,.7367,.73839,.74372,.74516,.74671,.7451,.7451,.7451,.7475,.74778,.7485,.74449,.74605,.74605,.74605,.74605,.74783,.75403,.75233,.74755,.74755,.74755,.74884,.75239,.75449,.7566,.75472,.75472,.75472,.75717,.7593,.75924,.75786,.75729,.75729,.75729,.75717,.75792,.76017,.76167,.76353,.76353,.76353,.76675,.76599,.76529,.76202,.764,.764,.764,.764,.75809,.75913,.75976,.75838,.75838,.75838,.75901,.75896,.75942,.75758,.75838,.75838,.75838,.75228,.75131,.74862,.74772,.74649,.74649,.74649,.7475,.74677,.74968,.75233,.75131,.75131,.75131,.75364,.75347,.7533,.75643,.76127,.76127,.76127,.76127,.76144,.76109,.75586,.75804,.75804,.75804,.75959,.76115,.76208,.76092,.76104,.76104,.76104,.75752,.75965,.75177,.74912,.75086,.75086,.75086,.75432,.76075,.76115,.76622,.76693,.76693,.76693,.77101,.76823,.76823,.76202,.76063,.76063,.76063,.76423,.76371,.76552,.76435,.76505,.76505,.76505,.76441,.76728,.76905,.76846,.77012,.77012,.77012,.77131,.77208,.77316,.7764,.78119,.78119,.78119,.78119,.78076,.78107,.7853,.78315,.78315,.78315,.78388,.78604,.78413,.78629,.78277886,.78277886,.78277886,.77827068,.77471336,.77784692,.77911959,.77911959,.77911959,.77911959,.77911959,.78088396,.78314668,.78542256,.78542256,.78542256,.78542256,.78425222,.78696781,.78833268,.78696781,.7870917,.7870917,.7870917,.78198311,.78455986,.78678206,.79026395,.78573112,.78573112,.78573112,.78357624,.78523753,.79013906,.79195375,.78641082,.78641082,.78641082,.7850526,.78727759,.78277886,.78064012,.78247261,.78247261,.78247261,.7797879,.78015291,.78228898,.77954475,.78265634,.78265634,.78265634,.78412922,.78622533,.78808417,.78827053,.78672016,.78672016,.78672016,.78672016,.78839483,.78665828,.78764965,.79276994,.79276994,.79276994,.79283279,.79346187,.79693975,.7980846,.78833268,.78833268,.78833268,.78982703,.79201647,.79170295,.79132706,.78939059,.78939059,.78939059,.78988942,.79145231,.79132706,.79611496,.80044825,.80044825,.80044825,.80128205,.80289041,.80224629,.80269706,.79961618,.79961618,.79961618,.79916886,.79605158,.79605158,.79327304,.79491256,.79491256,.79491256,.7940289,.79170295,.79522863,.79586152,.79586152,.79586152,.79586152,.79840319,.79624174,.79258144,.79497575,.79719388,.79719388,.79719388,.79662232,.79655887,.79789356,.7980846,.79980805,.79980805,.79980805,.79878585,.79541839,.7985307,.8,.80070462,.80070462,.80070462,.80567193,.80625655,.80925791,.81353726,.81400081,.81400081,.81400081,.81439857,.81201786,.8148631,.81967213,.82263903,.82263903,.82263903,.82678793,.82671958,.82671958,.82304527,.82583203,.82583203]},tn=function(e){Object(h.a)(l,e);var t=Object(f.a)(l);function l(e){var n;return Object(d.a)(this,l),(n=t.call(this,e)).getAddon=function(){try{var e=new b.Addon({});return e.on("init",(function(e){console.debug("Addon initialization",e),n.load(e),S(e.authUser&&e.authUser.id)})),e.on("reload",(function(){console.debug("Reload invoked!")})),e.on("update",(function(e){console.debug("Addon update - options: ",e),n.setState({isLoadingOnUpdate:!0}),n.load(e),E("update")})),e}catch(t){console.warn("Falied to load the addon -- ",t)}return null},n.load=C.a.debounce((function(e){n.loadData(e)}),100,{leading:!0}),n.computePortfolios=function(e,t,l,a,i){var o=function(e,t){return e.filter((function(e){return!e.deleted&&e.type})).filter((function(e){return["sell","buy","income","dividend","distribution","tax","fee","split","reinvest"].includes(e.type.toLowerCase())&&(e.security||e.symbol)})).map((function(e){var n,l,a,i=I(e.date),o=Number(e.currency_amount);if(o=e.investment&&e.investment.includes(":usd")?Q(i,o,t):o,"split"===e.type&&"REV"===e.origin_type&&(null===(n=e.description)||void 0===n?void 0:n.includes("@"))){var r=e.description.match(/@1:([0-9]+)/);r&&r[1]&&(a=parseInt(r[1]))}return{date:i,account:e.investment,symbol:e.security?B(e.security):e.symbol,price:e.currency_amount&&e.quantity?Number(Math.abs(e.currency_amount/e.quantity).toFixed(3)):0,type:e.type,amount:Math.abs(o),currency:e.security?e.security.currency:"USD",shares:e.quantity||0,fees:e.fee,description:e.description,splitRatio:a,securityType:null===(l=e.security)||void 0===l?void 0:l.type}}))}(l,i),r=o.reduce((function(e,t){return e[t.symbol]||(e[t.symbol]=[]),e[t.symbol].push(t),e}),{});e.forEach((function(e){var t;"crypto"===e.security.type&&(e.currency=e.security.currency="cad",e.security.last_price=Q((null===(t=e.security)||void 0===t?void 0:t.last_date)?D()(e.security.last_date.slice(0,10)):D()(),e.security.last_price,i));e.transactions=r[B(e.security)]||[],function(e){var t=e.transactions;if(t&&t.length&&!e.book_value){var n=t.filter((function(e){return["buy","sell"].includes(e.type)})).reduce((function(e,t){return"buy"===t.type?(e.value+=t.price*t.shares,e.shares+=t.shares,e.price=e.shares?e.value/e.shares:t.price):(e.value+=(e.price||t.price)*t.shares,e.shares+=t.shares),e}),{price:0,shares:0,value:0});e.book_value=n.value,e.gain_amount=e.market_value-n.value,e.gain_percent=e.gain_amount/e.book_value;var l=e.investments?e.investments[0]:void 0;l&&!l.book_value&&(l.book_value=e.book_value)}}(e)}));var s=function(e,t,n){return e.filter((function(e){return!e.deleted})).reduce((function(e,l){var a=l.type;if(["sell","buy","unknown","split","reinvest"].includes(a))return e;var i=I(l.date);if(["deposit","transfer","withdrawal"].includes(a)){var o=(n||[]).find((function(e){return e.institution===l.institution}));o&&o.created_at>i&&(i=o.created_at)}var r=i.format(F),s=e[r]?e[r]:{deposit:0,withdrawal:0,interest:0,income:0},u=Number(l.currency_amount);return u=l.investment&&l.investment.includes(":usd")?Q(i,u,t):u,["deposit"].includes(a)?s.deposit+=u:"transfer"===a?["FXT","BRW","ExchTrade"].includes(l.origin_type)||l.symbol||(s.deposit+=u):["fee","interest","tax"].includes(a)?s.interest+=Math.abs(u):["income","dividend","distribution"].includes(a)?s.income+=u:"withdrawal"===a?s.withdrawal+=Math.abs(u):console.debug("Unhandled type",a),e[r]=s,e}),{})}(l,i,a),u=Object.keys(t).reduce((function(e,n){var l=s[n]||{};return e[n]={value:t[n],deposit:l.deposit||0,withdrawal:l.withdrawal||0,income:l.income||0,interest:l.interest||0},e}),{}),c=[],d=Object.keys(u).sort(),p=Object.keys(s).filter((function(e){return e<d[0]})).reduce((function(e,t){var n=s[t];return e+=n.deposit-n.withdrawal}),0);d.forEach((function(e){var t=u[e];p+=t.deposit-t.withdrawal,c.push({date:e,value:t.value,deposits:p})})),n.setState({positions:e,securityTransactions:o,accountTransactions:X(l,i),allPortfolios:c,portfolios:c.filter((function(e){return D()(e.date).isoWeekday()<=5})),isLoaded:!0,isLoadingOnUpdate:!1,accounts:a,currencyCache:i})},n.state={addon:n.getAddon(),currencyCache:void 0,securityTransactions:[],accountTransactions:[],portfolios:[],allPortfolios:[],positions:[],accounts:[],isLoaded:!1,privateMode:!1,fromDate:Y},n}return Object(p.a)(l,[{key:"loadCurrenciesCache",value:function(){return this.state.currencyCache?null:(console.debug("Loading currencies data."),this.state.addon.request({method:"GET",endpoint:"currencies/usd/history",query:{base:"cad"}}).then((function(e){return W(e)})).catch((function(e){console.error("Failed to load currency data.",e)})))}},{key:"mergeOptions",value:function(e){this.state.options||this.setState({options:e});var t=this.state.options;return Object.keys(e).forEach((function(n){t[n]=e[n]})),this.setState({options:t}),t}},{key:"loadData",value:function(){var e=Object(c.a)(s.a.mark((function e(t){var n,l,a,i,o,r,c,d;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.mergeOptions(t),this.setState({privateMode:t.privateMode,fromDate:t.fromDate}),e.next=4,Promise.all([this.loadPositions(t),this.loadPortfolioData(t),this.loadTransactions(t),this.loadInstitutionsData(t),this.loadCurrenciesCache()]);case 4:n=e.sent,l=Object(u.a)(n,5),a=l[0],i=l[1],o=l[2],r=l[3],c=l[4],d=c||this.state.currencyCache,console.debug("Loaded data",{positions:a,portfolioByDate:i,transactions:o,accounts:r,currencyCache:d}),this.computePortfolios(a,i,o,r,d);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadPortfolioData",value:function(e){console.debug("Loading portfolio data.");var t={from:e.fromDate,to:e.toDate,assets:!1,groups:e.groupsFilter,institutions:e.institutionsFilter,investments:"all"===e.investmentsFilter?null:e.investmentsFilter};return this.state.addon.request({query:t,method:"GET",endpoint:"portfolio"}).then((function(e){return Z(e)})).catch((function(e){console.error("Failed to load portfolio data.",e)}))}},{key:"loadPositions",value:function(e){console.debug("Loading positions data.");var t={assets:!1,groups:e.groupsFilter,institutions:e.institutionsFilter,investments:"all"===e.investmentsFilter?null:e.investmentsFilter};return this.state.addon.request({query:t,method:"GET",endpoint:"positions"}).then((function(e){return $(e)})).catch((function(e){console.error("Failed to load position data.",e)}))}},{key:"loadInstitutionsData",value:function(e){console.debug("Loading institutions data..");var t={assets:!1,groups:e.groupsFilter,institutions:e.institutionsFilter,investments:"all"===e.investmentsFilter?null:e.investmentsFilter};return this.state.addon.request({query:t,method:"GET",endpoint:"institutions"}).then((function(t){return K(t,e.groupsFilter?e.groupsFilter.split(","):[],e.institutionsFilter?e.institutionsFilter.split(","):[])})).catch((function(e){console.error("Failed to load institutions data.",e)}))}},{key:"loadTransactions",value:function(e){console.debug("Loading transactions data.");var t=e.fromDate,n={assets:!1,from:t&&t<Y?t:Y,groups:e.groupsFilter,institutions:e.institutionsFilter,investments:"all"===e.investmentsFilter?null:e.investmentsFilter};return this.state.addon.request({query:n,method:"GET",endpoint:"transactions"}).then((function(e){return e})).catch((function(e){console.error("Failed to load transactions data.",e)}))}},{key:"loadStaticPortfolioData",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,l,a,i,o,r,c,d,p,h,f,b;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=11;break;case 3:o=e.sent,r=Object(u.a)(o,4),t=r[0],l=r[1],a=r[2],i=r[3],e.next=19;break;case 11:return e.next=13,Promise.all([n.e(4).then(n.bind(null,591)).then((function(e){return e.DATA})),n.e(6).then(n.bind(null,592)).then((function(e){return e.DATA})),n.e(8).then(n.bind(null,593)).then((function(e){return e.DATA})),n.e(10).then(n.bind(null,594)).then((function(e){return e.DATA}))]);case 13:c=e.sent,d=Object(u.a)(c,4),t=d[0],l=d[1],a=d[2],i=d[3];case 19:p=W(en),h=Z(l),f=$(a),b=K(t),this.computePortfolios(f,h,i,b,p),console.debug("State:",this.state);case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;this.state.addon||setTimeout((function(){return e.loadStaticPortfolioData()}),0),setTimeout((function(){return e.computeChangeLogCount()}),1e3)}},{key:"computeChangeLogCount",value:function(){var e=ye();e&&this.setState({newChangeLogsCount:e})}},{key:"render",value:function(){var e=this;return Object(pe.jsx)(M.b,{width:1,justifyContent:"center",children:Object(pe.jsxs)("div",{style:{padding:4,maxWidth:this.state.addon?"100%":1100,width:"100%"},children:[this.state.isLoaded?Object(pe.jsxs)(pe.Fragment,{children:[!this.state.addon&&Object(pe.jsx)(pe.Fragment,{children:Object(pe.jsxs)("p",{style:{fontWeight:"bolder",textAlign:"center",color:"#C00316",textDecoration:"underline"},children:[Object(pe.jsx)("img",{src:"/wealthica-portfolio-addon/favicon.png",alt:"favicon",width:"50",height:"50",style:{backgroundColor:"#fff"}}),"!! This is sample data !!"]})}),this.state.isLoadingOnUpdate&&Object(pe.jsx)(M.b,{width:1,justifyContent:"center",alignItems:"center",children:Object(pe.jsx)(O.a,{size:"small"})}),Object(pe.jsxs)(k.a,{defaultActiveKey:"pnl",onChange:function(t){"change-log"===t&&e.state.newChangeLogsCount&&(ge(),e.setState({newChangeLogsCount:void 0})),E("tab-change",{tab:t})},size:"large",children:[Object(pe.jsxs)(k.a.TabPane,{destroyInactiveTabPane:!0,forceRender:!0,tab:"P&L Charts",children:[Object(pe.jsx)(Mt,{portfolios:this.state.portfolios,privateMode:this.state.privateMode,positions:this.state.positions}),Object(pe.jsx)(Se,{portfolios:this.state.portfolios,isPrivateMode:this.state.privateMode}),Object(pe.jsx)($t,{portfolios:this.state.allPortfolios,isPrivateMode:this.state.privateMode}),Object(pe.jsx)(Ft,{portfolios:this.state.portfolios,isPrivateMode:this.state.privateMode}),Object(pe.jsx)(Lt,{portfolios:this.state.portfolios,isPrivateMode:this.state.privateMode})]},"pnl"),Object(pe.jsx)(k.a.TabPane,{forceRender:!0,tab:"Holdings Analyzer",children:this.state.positions.length?Object(pe.jsxs)(pe.Fragment,{children:[Object(pe.jsx)(at,{currencyCache:this.state.currencyCache||{},positions:this.state.positions,accounts:this.state.accounts,isPrivateMode:this.state.privateMode,addon:this.state.addon}),Object(pe.jsx)(Et,{positions:this.state.positions}),Object(pe.jsx)(ut,{positions:this.state.positions,isPrivateMode:this.state.privateMode})]}):Object(pe.jsx)(j.a,{description:"No Holdings"})},"holdings"),Object(pe.jsx)(k.a.TabPane,{destroyInactiveTabPane:!0,tab:"Gainers/Losers",children:Object(pe.jsx)(Kt,{positions:this.state.positions,isPrivateMode:this.state.privateMode,addon:this.state.addon,currencyCache:this.state.currencyCache||{}})},"gainers-losers"),Object(pe.jsx)(k.a.TabPane,{destroyInactiveTabPane:!0,tab:"Realized P&L",children:Object(pe.jsx)(Vt,{currencyCache:this.state.currencyCache||{},fromDate:this.state.fromDate,transactions:this.state.securityTransactions,accountTransactions:this.state.accountTransactions,accounts:this.state.accounts,isPrivateMode:this.state.privateMode})},"realized-pnl"),Object(pe.jsx)(k.a.TabPane,{destroyInactiveTabPane:!0,tab:"News",children:Object(pe.jsx)(gt,{positions:this.state.positions})},"news"),Object(pe.jsx)(k.a.TabPane,{destroyInactiveTabPane:!0,tab:"Events",children:Object(pe.jsx)(qe,{positions:this.state.positions})},"events"),Object(pe.jsx)(k.a.TabPane,{destroyInactiveTabPane:!0,tab:Object(pe.jsx)(m.a,{count:this.state.newChangeLogsCount,overflowCount:9,offset:[15,2],children:"Latest Changes"}),children:Object(pe.jsx)(me,{})},"change-log")]})]}):Object(pe.jsx)(M.b,{justifyContent:"center",width:1,children:Object(pe.jsx)(O.a,{size:"large"})}),Object(pe.jsx)("br",{}),Object(pe.jsx)("hr",{}),Object(pe.jsx)(y.a.Title,{level:4,type:"secondary",children:"Disclaimer"}),Object(pe.jsxs)(g.a,{type:"secondary",children:["This tool is simply a calculator of profit and loss using the deposits/withdrawals and daily portfolio values. Results provided by this tool do not constitute investment advice. The makers of this tool are not responsible for the consequences of any decisions or actions taken in reliance upon or as a result of the information provided by this tool. The information on the add-on may contain errors or inaccuracies. The use of the add-on is at your own risk and is provided without any warranty.",Object(pe.jsx)("br",{}),Object(pe.jsx)("br",{}),"Please trade responsibly. For any issues or feedback, contact the developer at"," ",Object(pe.jsx)("a",{href:"mailto:k.elayamani@gmail.com",children:"k.elayamani@gmail.com"})," or create a github issue"," ",Object(pe.jsx)("a",{href:"https://github.com/mani-coder/wealthica-portfolio-addon/issues/new?assignees=&labels=&template=custom.md&title=",target:"_blank",rel:"noopener noreferrer",children:"here"}),"."]}),Object(pe.jsx)("br",{}),Object(pe.jsx)("hr",{})]})})}}]),l}(l.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(pe.jsx)(tn,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[580,1,2]]]);
//# sourceMappingURL=main.e9ebc2d8.chunk.js.map